{"version":3,"sources":["src/js/main.js","../../node_modules/@babel/runtime/regenerator/index.js","../../node_modules/regenerator-runtime/runtime.js","../../node_modules/@babel/runtime/helpers/asyncToGenerator.js","../../src/js/game/state.js","../../src/js/game/player.js","../../src/js/game/resources.js","../../src/js/game/sprite.js","../../src/js/game/enemy.js","../../node_modules/@babel/runtime/helpers/inheritsLoose.js","../../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../node_modules/@babel/runtime/helpers/isNativeFunction.js","../../node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","../../node_modules/@babel/runtime/helpers/construct.js","../../src/js/game/hashmap.js","../../node_modules/@babel/runtime/helpers/wrapNativeSuper.js","../../src/js/game/grid.js","../../src/js/game/info.js","../../src/js/game/qix.js","../../src/js/main.js","../../src/js/game/game.js"],"names":["createCommonjsModule","fn","module","exports","regenerator","runtime","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","value","makeInvokeMethod","obj","call","err","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","then","unwrapped","error","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","keys","object","key","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","asyncGeneratorStep","gen","_next","_throw","asyncToGenerator","args","arguments","apply","State","ended","won","paused","Date","now","soundtrack","gameWon","gameLost","timer","frameCount","Player","grid","FillScore","ctx","position","dx","dy","dir","draw","drawing","launch_point","score","_proto","add_score","n","update","_this$position","x","y","_this$calc_dir","calc_dir","cell_empty","cell_wall","set","TRAIL","_this$dir","pa","pb","da","db","trace","TRAILTRACE","WALL","WALLTRACE","test_point","Qix","p","seek","fill","percent","Math","round","game","current_filling","_this$launch_point","xa","ya","dirty_region","paint","beginPath","strokeStyle","arc","offset","PI","stroke","fillStyle","shift","left","right","up","down","EMPTY","OUT","cache","callbacks","Resources","load","urlOrArr","Array","url","loadUrl","img","Image","onload","isReady","callback","src","get","console","log","ready","k","onReady","Sprite","pos","size","speed","frames","once","index","dt","getPosition","frame","max","idx","floor","render","drawImage","image","pattern_canvas","document","createElement","width","height","getContext","Enemy","sprite","left_turn","[0,1]","[1,0]","[0,-1]","[-1,0]","right_turn","turn","valid","dxtmp","dytmp","vueltas","_ref","_ref2","add_crumb","options","mejorGiro","Number","MAX_SAFE_INTEGER","giro","cell_traceable","get_crumbs","_mejorGiro$","player","save","translate","restore","inheritsLoose","subClass","superClass","_getPrototypeOf","o","_setPrototypeOf","isNativeFunction","indexOf","isNativeReflectConstruct","Reflect","construct","sham","Proxy","e","_construct","Parent","Class","a","instance","bind","HashMap","hash","_this","_Map","has","_wrapNativeSuper","_cache","Map","Wrapper","enumerable","writable","configurable","wrapNativeSuper","Grid","colors","enemies","init","w","canvas","getElementById","h","_grid","crumbs","filled_area","total_area","dirty","JSON","stringify","border","j","clear","clearRect","v","blit","map","dot","parse","join","fillRect","p0","p1","v0","v1","0,0","1,0","0,1","-1,0","0,-1","found","_turn$join","vlist","invert","vf","vmap","y_filling","filling","area","vset","includes","cell_draw","x1","x2","y1","y2","c","match","ytmp","drawLine","moveTo","lineTo","displayScore","font","fillText","toFixed","displayTimer","Info","displayText","displayFPS","fps","unit_vectors","uvec_index","directions","dir_index","dir_reflect_x","dir_reflect_y","dir_clockwise","dir_cclockwise","dir_approach","dir_steps","ux","uy","_this$directions$_i","_cmp","abs","d","history","dhistory","phase","unit_vector","x0","y0","clear_line","m","b","_ref3","pscan","g","adx","ady","trace_race","d0","d1","dx0","dy0","dx1","dy1","_ref4","_ref5","_ref6","_ref7","strategy_random","random","steps","pg","dg","xoff","yoff","_this$p$i","_steps$","_steps$2","_this$p$i2","_steps$3","hit0","hit1","u0","u1","_this$trace_race","dh","Game","qix","loadAssets","_start","Howl","volume","start","measureFPS","delta","loop","enemy","requestAnimationFrame","sleep","ms","setTimeout","_callee","_context","play","onKeydown","onKeyup","addEventListener","toggle","disableAll","event","shiftKey","keyCode","preventDefault"],"mappings":"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","file":"docs\\js\\main.min.js","sourcesContent":[null,"module.exports = require(\"regenerator-runtime\");\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","export const State = {\n    ended: false,\n    won: false,\n    paused: false,\n    then: Date.now(),\n    soundtrack: null,\n    gameWon: null,\n    gameLost: null,\n    timer: 30,\n    frameCount: 0,\n    keys: {},\n}","import {\n    State\n} from './state';\n\nexport default class Player {\n\n    constructor(grid) {\n        this.FillScore = [0, 5, 10];\n        this.grid = grid;\n        this.ctx = grid.ctx;\n        this.position = [96, 118];\n        this.dx = 0;\n        this.dy = 0;\n        this.dir = [this.dx, this.dy];\n        this.draw = 0;\n        this.drawing = 0;\n        this.launch_point = null;\n        this.score = 0;\n    }\n\n    add_score(n) {\n        this.score += n;\n    }\n\n    // Movimiento del Player\n    update() {\n        let dx, dy, draw;\n        let [x, y] = this.position;\n        if (((x + y) & 1) === 0) { // Suma par, se puede girar\n            [dx, dy, draw] = this.calc_dir();\n            if (this.drawing) {\n                if (this.grid.cell_empty(x + dx * 2, y + dy * 2) || this.grid.cell_wall(x + dx * 2, y + dy * 2) && ((x + dx * 2) !== this.launch_point[0] || (y + dy * 2) !== this.launch_point[1])) {\n                    this.dir = [dx, dy];\n                    x += dx;\n                    y += dy;\n                    this.grid.set(x, y, this.TRAIL);\n                    this.position = [x, y];\n                } else {\n                    this.dir = [0, 0];\n                }\n            } else {\n                if (this.grid.cell_wall(x + dx, y + dy)) {\n                    this.dir = [dx, dy];\n                    x += dx;\n                    y += dy;\n                    this.position = [x, y];\n                } else if (draw && this.grid.cell_empty(x + dx, y + dy) && /* Empezar a pintar */\n                    this.grid.cell_empty(x + dx * 2, y + dy * 2) || (draw && this.grid.cell_wall(x + dx * 2, y + dy * 2) && this.grid.cell_empty(x + dx, y + dy))) {\n                    this.launch_point = [x, y];\n                    this.dir = [dx, dy];\n                    x += dx;\n                    y += dy;\n                    this.position = [x, y];\n                    this.drawing = draw;\n                    this.grid.set(x, y, this.TRAIL);\n                } else { // Direccion bloqueada\n                    this.dir = [0, 0];\n                }\n            }\n        } else { // Posicion impar, no se puede girar. Forzar a moverse a la siguiente casilla.\n            [dx, dy] = this.dir;\n            if (this.drawing) {\n                if (this.grid.cell_wall(x + dx, y + dy)) {\n                    // landing\n                    x += dx;\n                    y += dy;\n                    //  corner points\n                    pa = [x - dx - dy, y - dy - dx];\n                    pb = [x - dx + dy, y - dy + dx];\n                    if (this.grid.cell_wall(x - dy, y - dx)) {\n                        da = [-dy, -dx];\n                    } else {\n                        da = [dx, dy];\n                    }\n                    if (this.grid.cell_wall(x + dy, y + dx)) {\n                        db = [+dy, +dx];\n                    } else {\n                        db = [dx, dy];\n                    }\n                    this.grid.trace([x, y], this.launch_point, [-dx, -dy], this.TRAIL, this.TRAILTRACE);\n                    this.grid.trace([x, y], this.launch_point, da, this.WALL, this.WALLTRACE);\n                    let test_point = Qix.p[0];\n                    if (this.grid.seek(pa, test_point, [10, 7])) {\n                        n = this.grid.fill(pb, [10, 7], 2);\n                        this.add_score(n * this.FillScore[1]);\n                        if (this.grid.percent > 75) {\n                            this.add_score(Math.round(this.grid.percent - 75) * this.FillScore[2]);\n                            game.won = true;\n                            game.ended = true;\n                        } else if (this.grid.percent === 75) {\n                            game.won = true;\n                            game.ended = true;\n                        }\n                        this.grid.current_filling = n;\n                        this.grid.trace([x, y], this.launch_point, da, 11, this.WALL); // # rewall\n                        this.grid.trace([x, y], this.launch_point, db, this.WALL, 4); // # bury\n                        this.grid.trace([x, y], this.launch_point, [-dx, -dy], 10, this.WALL); // # solidify\n                    } else {\n                        let [xa, ya] = this.launch_point;\n                        this.grid.set(xa, ya, 11);\n                        this.grid.set(x, y, 11);\n                        n = this.grid.fill(pa, [10, 11], 2);\n                        this.grid.current_filling = n;\n                        this.add_score(n * this.FillScore[1]);\n                        if (this.grid.percent > 75) {\n                            this.add_score(Math.round(this.grid.percent - 75) * this.FillScore[2]);\n                            game.won = true;\n                            game.ended = true;\n                        } else if (this.grid.percent === 75) {\n                            game.won = true;\n                            game.ended = true;\n                        }\n                        this.grid.set(xa, ya, 7);\n                        this.grid.set(x, y, 7);\n                        this.grid.trace([x, y], this.launch_point, da, 11, 4); // # bury;\n                        this.grid.trace([x, y], this.launch_point, [-dx, -dy], 10, 7); //  # solidify;\n                    }\n                    this.drawing = 0;\n                    this.launch_point = null;\n                } else {\n                    x += dx;\n                    y += dy;\n                    this.grid.set(x, y, this.TRAIL);\n                }\n            } else {\n                x += dx;\n                y += dy;\n            }\n        }\n        this.position = [x, y];\n        this.grid.dirty_region(x, y, 3);\n    }\n\n    // Pintar al Player\n    paint() {\n        this.ctx.beginPath();\n        this.ctx.strokeStyle = \"black\";\n        this.ctx.arc(this.grid.offset[0] + (this.position[0] * 3), this.grid.offset[1] + (this.position[1] * 3), 5, 0, 2 * Math.PI, true);\n        this.ctx.stroke();\n        this.ctx.fillStyle = \"red\";\n        this.ctx.fill();\n    }\n\n    // Calcular la direccion que debe seguir segun los input\n    calc_dir() {\n        let dx = 0,\n            dy = 0,\n            draw = 0;\n        if (State.keys.shift) {\n            draw = 1;\n        } else {\n            draw = 0;\n        }\n        if (State.keys.left) {\n            dx = -1;\n            dy = 0;\n        } else if (State.keys.right) {\n            dx = 1;\n            dy = 0;\n        } else if (State.keys.up) {\n            dx = 0;\n            dy = -1;\n        } else if (State.keys.down) {\n            dx = 0;\n            dy = 1;\n        } else {\n            dx = 0;\n            dy = 0;\n        }\n        return [dx, dy, draw];\n    }\n\n}\n\nPlayer.EMPTY = 0;\nPlayer.TRAIL = 5;\nPlayer.WALL = 7;\nPlayer.OUT = 3;\nPlayer.TRAILTRACE = 10;\nPlayer.WALLTRACE = 11;","const cache = {};\nconst loading = [];\nconst callbacks = [];\n\nexport default class Resources {\n\n    // Load an image url or an array of image urls\n    static load(urlOrArr) {\n        if (urlOrArr instanceof Array) {\n            urlOrArr.forEach((url) => {\n                Resources.loadUrl(url);\n            });\n        } else {\n            Resources.loadUrl(urlOrArr);\n        }\n    }\n\n    static loadUrl(url) {\n        if (cache[url]) {\n            return cache[url];\n        } else {\n            var img = new Image();\n            img.onload = () => {\n                cache[url] = img;\n                if (Resources.isReady()) {\n                    callbacks.forEach((callback) => {\n                        callback();\n                    });\n                }\n            };\n            cache[url] = false;\n            img.src = url;\n        }\n    }\n\n    static get(url) {\n        console.log(cache, url);\n        return cache[url];\n    }\n\n    static isReady() {\n        var ready = true;\n        for (var k in cache) {\n            if (cache.hasOwnProperty(k) && !cache[k]) {\n                ready = false;\n            }\n        }\n        return ready;\n    }\n\n    static onReady(callback) {\n        callbacks.push(callback);\n    }\n}","import Resources from \"./resources\";\n\nexport default class Sprite {\n    constructor(url, pos, size, speed, frames, dir, once) {\n        this.pos = pos;\n        this.size = size;\n        this.speed = typeof speed === 'number' ? speed : 0;\n        this.frames = frames;\n        this.index = 0;\n        this.url = url;\n        this.dir = dir || 'horizontal';\n        this.once = once;\n    }\n\n    update(dt) {\n        this.index += this.speed * dt;\n    }\n\n    getPosition() {\n        let frame;\n        if (this.speed > 0) {\n            const max = this.frames.length;\n            const idx = Math.floor(this.index);\n            frame = this.frames[idx % max];\n            if (this.once && idx >= max) {\n                this.done = true;\n                return;\n            }\n        } else {\n            frame = 0;\n        }\n        let x = this.pos[0];\n        let y = this.pos[1];\n        if (this.dir == 'vertical') {\n            y += frame * this.size[1];\n        } else {\n            x += frame * this.size[0];\n        }\n        return {\n            x: x,\n            y: y\n        };\n    }\n\n    render(ctx) {\n        const pos = this.getPosition();\n        ctx.drawImage(Resources.get(this.url), pos.x, pos.y, this.size[0], this.size[1], 0, 0, this.size[0], this.size[1]);\n    }\n\n    image() {\n        const pos = this.getPosition();\n        const pattern_canvas = document.createElement('canvas');\n        pattern_canvas.width = this.size[0];\n        pattern_canvas.height = this.size[1];\n        const pattern_context = pattern_canvas.getContext('2d');\n        pattern_context.drawImage(Resources.get(this.url), pos.x, pos.y, this.size[0], this.size[1], 0, 0, this.size[0], this.size[1]);\n        return pattern_canvas;\n    }\n\n}","import Player from './player';\nimport Sprite from './sprite';\nimport {\n    State\n} from './state';\n\nexport default class Enemy {\n\n    constructor(grid, position, dir) {\n        this.grid = grid;\n        this.sprite = new Sprite('/img/sprites.png', [0, 0], [16, 16], 1, [0, 1, 2, 3, 4, 5, 6, 7]);\n        this.ctx = grid.ctx;\n        this.dir = dir;\n        this.position = position;\n        this.left_turn = {\n            \"[0,1]\": [1, 0],\n            \"[1,0]\": [0, -1],\n            \"[0,-1]\": [-1, 0],\n            \"[-1,0]\": [0, 1]\n        }\n        this.right_turn = {\n            \"[0,1]\": [-1, 0],\n            \"[1,0]\": [0, 1],\n            \"[0,-1]\": [1, 0],\n            \"[-1,0]\": [0, -1]\n        }\n        if (dir[0] === 1) { // clockwise\n            this.turn = [this.left_turn, this.right_turn];\n        } else { // # counter-clockwise;\n            this.turn = [this.right_turn, this.left_turn];\n        }\n        let [x0, y0] = [0, 0];\n        let [x, y] = position;\n    }\n\n    update() {\n        let [x0, y0] = [0, 0];\n        let [x, y] = this.position;\n        let [dx, dy] = this.dir;\n        const grid = this.grid;\n        let c = 0;\n        if (grid.get(x, y) === Player.WALL) {\n            if (grid.get(x + dx, y + dy) !== Player.WALL) {\n                let valid = false;\n                let dxtmp = dx;\n                let dytmp = dy;\n                let vueltas = 0;\n                while (!valid || vueltas > 4) {\n                    [dxtmp, dytmp] = [this.turn[1][\"[\" + dxtmp + \",\" + dytmp + \"]\"][0],\n                        this.turn[1][\"[\" + dxtmp + \",\" + dytmp + \"]\"][1]\n                    ];\n                    if (grid.get(x + dxtmp, y + dytmp) === Player.WALL && (x + dxtmp !== x - dx && y + dytmp !== y - dy)) {\n                        dx = dxtmp;\n                        dy = dytmp;\n                        valid = true;\n                    } else {\n                        vueltas++;\n                    }\n                }\n                if (!valid && vueltas > 4) {\n                    dx = dx * -1;\n                    dy = dy * -1;\n                }\n            }\n            x += dx;\n            y += dy;\n        } else {\n            if (grid.get(x + dx, y + dy) === Player.WALL) {\n                x += dx;\n                y += dy;\n                [dx, dy] = [this.turn[0][\"[\" + dx + \",\" + dy + \"]\"][0], this.turn[0][\"[\" + dx + \",\" + dy + \"]\"][1]];\n            } else {\n                grid.add_crumb(x, y);\n                let options = [];\n                options.push([this.turn[0][\"[\" + dx + \",\" + dy + \"]\"][0], this.turn[0][\"[\" + dx + \",\" + dy + \"]\"][1]]);\n                options.push([dx, dy]);\n                options.push([this.turn[1][\"[\" + dx + \",\" + dy + \"]\"][0], this.turn[1][\"[\" + dx + \",\" + dy + \"]\"][1]]);\n                let mejorGiro = [Number.MAX_SAFE_INTEGER, [0, 0]];\n                options.forEach(function (giro) {\n                    if (grid.cell_traceable(x + giro[0], y + giro[1])) {\n                        if (grid.get_crumbs(x + giro[0], y + giro[1]) <= mejorGiro[0]) {\n                            mejorGiro[0] = grid.get_crumbs(x + giro[0], y + giro[1]);\n                            mejorGiro[1] = giro;\n                        }\n                    }\n                });\n                [dx, dy] = mejorGiro[1];\n                x += dx;\n                y += dy;\n            }\n        }\n        if ((x === State.player.position[0] && y === State.player.position[1]) || (this.position[0] === State.player.position[0] && this.position[1] === State.player.position[1])) {\n            game.ended = true;\n        }\n        this.position = [x, y];\n        grid.dirty_region(x, y, 4);\n        this.dir = [dx, dy];\n        this.sprite.update(1);\n    }\n\n    paint() {\n        this.ctx.save();\n        this.ctx.translate(this.grid.offset[0] + this.position[0] * 3 - 6, this.grid.offset[1] + this.position[1] * 3 - 6);\n        this.sprite.render(this.ctx);\n        this.ctx.restore();\n    }\n}","function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nmodule.exports = _inheritsLoose;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","export default class HashMap extends Map {\n\n    constructor(hash) {\n        super();\n        this.hash = hash;\n    }\n\n    set(key, value) {\n        return super.set(this.hash(key), value);\n    }\n\n    get(key) {\n        return super.get(this.hash(key));\n    }\n\n    has(key) {\n        return super.has(this.hash(key));\n    }\n\n    delete(key) {\n        return super.delete(this.hash(key));\n    }\n\n}","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","import Enemy from './enemy';\nimport HashMap from './hashmap';\nimport Player from './player';\n\nexport default class Grid {\n\n    constructor() {\n        this.offset = [50, 50];\n        this.colors = [\n            [0, 0, 0], // 0 empty\n            [0, 0, 180], // 1 fill\n            [160, 0, 0], // 2 fill\n            [74, 54, 94], // 3 OUT\n            [255, 192, 203], // 4 pink\n            [255, 255, 255], // 5 TRACE\n            [255, 255, 255], // 6 white\n            [192, 192, 192], // 7 WALL\n            [255, 0, 0], // 8 red\n            [255, 0, 0], // 9 red\n            [255, 0, 0], // 10 TRAILTRACE\n            [255, 0, 255]\n        ]; // 11 WALLTRACE\n        this.enemies = [];\n        this.init();\n        this.reset();\n        this.enemies.push(new Enemy(this, [Math.round(this.w / 2), 2], [1, 0]));\n        this.enemies.push(new Enemy(this, [Math.round(this.w / 2), 2], [-1, 0]));\n    }\n\n    init() {\n        this.canvas = document.getElementById('grid');\n        this.canvas.width = 640;\n        this.canvas.height = 480;\n        this.ctx = this.canvas.getContext(\"2d\");\n        this.w = 194; // grid width\n        this.h = 122; // grid height\n        this.width = this.w;\n        this.height = this.h;\n        // Inicializar las posiciones del grid a empty\n        this._grid = [];\n        for (let i = 0; i < this.w * (this.h + 2); i++) {\n            this._grid[i] = 0;\n        }\n        // Inicializar un array de crumbs vacio\n        this.crumbs = [];\n        for (let i = 0; i < this.w * (this.h + 2); i++) {\n            this.crumbs[i] = 0;\n        }\n        this.percent = 0;\n        this.filled_area = 0;\n        this.total_area = (this.w - 6) * (this.h - 6) / 4;\n    }\n\n    // Reiniciar todos los valores del grid\n    reset() {\n        this.dirty = new HashMap(JSON.stringify);\n        // Todos los valores a empty\n        for (let x = 2; x < this.w; x++) {\n            for (let y = 2; y < this.h; y++) {\n                this.set(x, y, 0);\n            }\n        }\n        let [w, h] = [this.w, this.h];\n        // OUT\n        for (let x = 0; x < w; x++) {\n            this.set(x, 0, Player.OUT);\n            this.set(x, 1, Player.OUT);\n            this.set(x, h - 3, Player.OUT);\n            this.set(x, h - 2, Player.OUT);\n            this.set(x, h - 1, Player.OUT);\n        }\n        for (let y = 0; y < h; y++) {\n            this.set(0, y, Player.OUT);\n            this.set(1, y, Player.OUT);\n            this.set(w - 3, y, Player.OUT);\n            this.set(w - 2, y, Player.OUT);\n            this.set(w - 1, y, Player.OUT);\n        }\n        // WALLS\n        for (let x = 2; x < w - 3; x++) {\n            this.set(x, 2, Player.WALL);\n            this.set(x, h - 4, Player.WALL);\n        }\n        for (let y = 2; y < h - 3; y++) {\n            this.set(2, y, Player.WALL);\n            this.set(w - 4, y, Player.WALL);\n        }\n    }\n\n    dirty_region(x, y, border) {\n        for (let i = x - border; i < x + border; i++) {\n            for (let j = y - border; j < y + border; j++) {\n                if (i >= 0 && i <= this.w && j >= 0 && j <= this.h) {\n                    this.dirty.set([i, j], 1);\n                }\n            }\n        }\n    }\n\n    // Limpiar la pantalla\n    clear() {\n        this.ctx.fillStyle = \"#000000\";\n        this.ctx.clearRect(this.offset[0], this.offset[1], this.w * 3, this.h * 3);\n    }\n\n    // Cambiar el valor de una posicion del grid\n    set(x, y, v) {\n        this._grid[(this.w * y) + x] = v;\n        this.dirty.set([x, y], 1);\n    }\n\n    // Conseguir el valor de una posicion del grid\n    get(x, y) {\n        return this._grid[(this.w * y) + x];\n    }\n\n    blit(x, y, v) {}\n\n    paint() {\n        this.dirty.forEach((value, key, map) => {\n            let dot = JSON.parse(key);\n            let x = dot[0];\n            let y = dot[1];\n            let v = this.get(x, y);\n            this.ctx.fillStyle = 'rgb(' + this.colors[v].join(',') + ')';\n            if ((this.offset[1] + y * 3) + 3 <= this.offset[1] + this.h * 3) {\n                this.ctx.fillRect(this.offset[0] + x * 3, this.offset[1] + y * 3, 3, 3);\n            }\n        });\n        this.dirty = new HashMap(JSON.stringify);\n    }\n\n    // Devuelve si la coordenada es una pared\n    cell_wall(x, y) {\n        return (this.get(x, y) === Player.WALL);\n    }\n\n    // Devuelve si la coordenada esta vacia\n    cell_empty(x, y) {\n        return (this.get(x, y) === Player.EMPTY);\n    }\n\n    // Cambia el valor v0 a v1 en el grid siguiendo el path de p0 a p1 (sin incluirlos)\n    // Comienza a probar por la dirección dir. Devuelve la ultima direccion\n    trace(p0, p1, dir, v0, v1) {\n        let [x, y] = p0;\n        let [dx, dy] = dir;\n        let turn = {\n            \"0,0\": [0, 1],\n            \"1,0\": [0, 1],\n            \"0,1\": [-1, 0],\n            \"-1,0\": [0, -1],\n            \"0,-1\": [1, 0],\n        };\n        let found = false;\n        while (!found) {\n            if (x + dx === p1[0] && y + dy === p1[1]) {\n                found = true;\n            } else if (this.get(x + dx, y + dy) === v0) {\n                this.set(x + dx, y + dy, v1);\n                x += dx;\n                y += dy;\n            } else {\n                [dx, dy] = turn[[dx, dy].join(\",\")];\n            }\n        }\n        return [dx, dy];\n    }\n\n    // Rellena una region bordeada por vlist y conteniendo el punto p0, con el valor v\n    fill(p0, vlist, v, invert) {\n        let vf = this.vmap(vlist);\n        let y_filling = this.seek(p0, [3, 3], vlist);\n        if (invert) {\n            y_filling = !y_filling;\n        }\n        let area = 0;\n        let filling;\n        for (let y = 3; y < this.h - 3; y = y + 2) {\n            filling = y_filling;\n            for (let x = 3; x < this.w - 3; x++) {\n                if (vf(x, y)) {\n                    filling = !filling;\n                } else {\n                    if (filling) {\n                        this.set(x, y, v);\n                        area += (x & 1); // sumar sólo impares\n                        if (!vf(x, y + 1)) {\n                            this.set(x, y + 1, v);\n                        }\n                    }\n                }\n            }\n            if (vf(3, y + 1)) {\n                y_filling = !y_filling;\n            }\n        }\n        this.filled_area += area;\n        this.percent = 100 * this.filled_area / this.total_area;\n        return area;\n    }\n\n    // Devuelve una funcion que dice si una coordenada contiene alguno de los valores de vset en el grid\n    vmap(vset) {\n        let a = [];\n        for (let i = 0; i < 16; i++) {\n            a.push(vset.includes(i));\n        }\n        let obj = this;\n\n        function cell_f(x, y) {\n            if (y === undefined) {\n                return a[x];\n            } else if (y >= 0) {\n                return a[obj._grid[obj.w * y + x]];\n            } else {\n                return 0;\n            }\n        }\n        return cell_f;\n    }\n\n    // Comprueba si la coordenada traceable\n    cell_traceable(x, y) {\n        let vf = this.vmap([4, 7]);\n        return vf(x, y);\n    }\n\n    // Comprueba si la coordenada es TRACE\n    cell_draw(x, y) {\n        let vf = this.vmap([5]);\n        return vf(x, y);\n    }\n\n    // Comprueba si dos puntos se encuentran en la misma region limitada por vlist\n    seek(p0, p1, vlist) {\n        let c = 0;\n        let x1, x2, y1, y2;\n        let match = this.vmap(vlist);\n        if (p0[0] <= p1[0]) {\n            x1 = p0[0];\n            y1 = p0[1];\n            x2 = p1[0];\n            y2 = p1[1];\n        } else {\n            x2 = p0[0];\n            y2 = p0[1];\n            x1 = p1[0];\n            y1 = p1[1];\n        }\n        for (let i = x1; i <= x2; i++) {\n            if (match(i, y1)) {\n                c++;\n            }\n        }\n        if (y1 <= y2) {\n            x1 = x2;\n            // y1 se queda igual\n        } else {\n            let ytmp = y1;\n            x1 = x2;\n            y1 = y2;\n            // x2 se queda igual\n            y2 = ytmp;\n        }\n        for (let i = y1; i <= y2; i++) {\n            if (match(x1, i)) {\n                c++;\n            }\n        }\n        return (c % 2 === 0);\n    }\n\n    // Agrega un crumb en la posicion\n    add_crumb(x, y) {\n        this.crumbs[(this.w * y) + x]++;\n    }\n\n    // Devuelve los crumbs de la posicion\n    get_crumbs(x, y) {\n        return this.crumbs[(this.w * y) + x];\n    }\n\n    // Dibuja una linea entre los dos puntos\n    drawLine(p0, p1) {\n        this.ctx.beginPath();\n        this.ctx.moveTo(p0[0], p0[1]);\n        this.ctx.lineTo(p1[0], p1[1]);\n        this.ctx.strokeStyle = 'rgb(255,0,0)';\n        this.ctx.stroke();\n    }\n\n    // Muestra la puntuacion\n    displayScore() {\n        this.ctx.fillStyle = 'rgb(0,255,0)';\n        this.ctx.clearRect(0, 0, this.canvas.width - 3, this.offset[1] - 3);\n        this.ctx.font = \"32px Georgia\";\n        this.ctx.fillText(\"Score: \" + Player.score, 80, 35);\n        this.ctx.fillText(\"Area: \" + this.percent.toFixed(2) + \" / 75%\", 350, 35);\n    }\n\n    displayTimer() {\n        this.ctx.clearRect(this.offset[0] - 5, this.offset[1] + this.height * 3 + 10, this.width * 3 + 10, 40);\n        this.ctx.fillStyle = \"orange\";\n        this.ctx.fillRect(this.offset[0], this.offset[1] + this.height * 3 + 15, (game.timer / 30) * (this.width * 3), 5);\n        this.ctx.font = \"20px Georgia\";\n        this.ctx.fillText(\"New enemies in \" + game.timer + \"s\", this.offset[0] + this.width + 10, this.offset[1] + this.height * 3 + 45);\n    }\n}","export default class Info {\n\n    constructor() {\n        this.ctx = document.getElementById(\"info\").getContext(\"2d\");\n        this.displayText();\n    }\n\n    displayText() {\n        this.ctx.fillStyle = \"black\";\n        this.ctx.font = \"bold 32px Georgia\";\n        this.ctx.fillText(\"Objetivo del juego\", 75, 35);\n        this.ctx.font = \"15px Georgia\";\n        this.ctx.fillText(\"Este juego consiste en rellenar el 75% de la pantalla formando polígonos.\", 75, 70);\n        this.ctx.fillText(\"Un polígono es completado al conectar la línea con una pared ya existente.\", 75, 90);\n        this.ctx.fillText(\"Si el enemigo principal, el Qix, choca contigo o cualquier punto de un polígono \", 75, 110);\n        this.ctx.fillText(\"sin completar, morirás. Lo mismo ocurrirá si un Sparx te toca.\", 75, 130);\n        this.ctx.font = \"bold 32px Georgia\";\n        this.ctx.fillText(\"Controles\", 75, 180);\n        this.ctx.font = \"bold 15px Georgia\";\n        this.ctx.fillText(\"Flechas direccionales:\", 75, 215);\n        this.ctx.font = \"15px Georgia\";\n        this.ctx.fillText(\"Movimiento del jugador.\", 250, 215);\n        this.ctx.font = \"bold 15px Georgia\";\n        this.ctx.fillText(\"Shift:\", 75, 235);\n        this.ctx.font = \"15px Georgia\";\n        this.ctx.fillText(\"Permite comenzar a crear un polígono.\", 122, 235);\n        this.ctx.font = \"bold 15px Georgia\";\n        this.ctx.fillText(\"'P' y 'p':\", 75, 255);\n        this.ctx.font = \"15px Georgia\";\n        this.ctx.fillText(\"Pausar o reanudar el juego.\", 138, 255);\n        this.ctx.font = \"bold 12px Georgia\";\n    }\n\n    displayFPS() {\n        this.ctx.clearRect(70, 450, 70, 20);\n        this.ctx.fillText(\"FPS: \" + game.fps, 75, 460);\n    }\n\n}","import HashMap from './hashmap';\n\nexport default class Qix {\n\n    constructor() {\n        this.left_turn = {\n            \"[0,1]\": [1, 0],\n            \"[1,0]\": [0, -1],\n            \"[0,-1]\": [-1, 0],\n            \"[-1,0]\": [0, 1]\n        }\n        this.right_turn = {\n            \"[0,1]\": [-1, 0],\n            \"[1,0]\": [0, 1],\n            \"[0,-1]\": [1, 0],\n            \"[-1,0]\": [0, -1]\n        }\n        this.unit_vectors = [\n            [1, -1],\n            [1, 0],\n            [1, 1],\n            [0, 1],\n            [-1, 1],\n            [-1, 0],\n            [-1, -1],\n            [0, -1]\n        ]; // # king moves\n        this.uvec_index = new HashMap(JSON.stringify);\n        for (let i = 0; i < 8; i++) {\n            this.uvec_index.set(this.unit_vectors[i], i);\n        }\n        this.directions = [\n            [1, -2],\n            [2, -1],\n            [2, 1],\n            [1, 2],\n            [-1, 2],\n            [-2, 1],\n            [-2, -1],\n            [-1, -2]\n        ]; // # knight moves\n        this.dir_index = new HashMap(JSON.stringify);\n        for (let i = 0; i < 8; i++) {\n            this.dir_index.set(this.directions[i], i);\n            // # directional knight move operators\n            this.dir_reflect_x = new HashMap(JSON.stringify);\n            this.directions.forEach(x => this.dir_reflect_x.set(x, [-x[0], x[1]]));\n            this.dir_reflect_y = new HashMap(JSON.stringify);\n            this.directions.forEach(x => this.dir_reflect_y.set(x, [x[0], -x[1]]));\n            this.dir_clockwise = new HashMap(JSON.stringify);\n            this.directions.forEach(x => this.dir_clockwise.set(x, this.directions[(this.dir_index.get(x) + 1) % 8]));\n            this.dir_cclockwise = new HashMap(JSON.stringify);\n            this.directions.forEach(x => this.dir_cclockwise.set(x, this.directions[(this.dir_index.get(x) + 7) % 8]));\n            this.dir_approach = new HashMap(JSON.stringify);\n            for (let i = 0; i < 8; i++) {\n                for (let j = 0; j < 4; j++) {\n                    this.dir_approach.set([this.directions[i], this.unit_vectors[(i + j) % 8]], this.dir_clockwise.get(this.directions[i]));\n                    this.dir_approach.set([this.directions[i], this.unit_vectors[(i + j + 4) % 8]], this.dir_cclockwise.get(this.directions[i]));\n                }\n            }\n            this.dir_steps = new HashMap(JSON.stringify); // # knight move as three unit steps\n            let dx, dy;\n            let ux, uy;\n            for (let i = 0; i < 8; i++) {\n                [dx, dy] = this.directions[i];\n                ux = this._cmp(dx, 0);\n                uy = this._cmp(dy, 0);\n                if (Math.abs(dx) > Math.abs(dy)) {\n                    this.dir_steps.set([dx, dy], [\n                        [ux, 0],\n                        [0, uy],\n                        [ux, 0]\n                    ]);\n                } else {\n                    this.dir_steps.set([dx, dy], [\n                        [0, uy],\n                        [ux, 0],\n                        [0, uy]\n                    ]);\n                }\n            }\n        }\n        this.init();\n    }\n\n    init() {\n        this.p = [\n            [55, 55],\n            [57, 59]\n        ]; //  #position\n        this.d = [\n            [1, 2],\n            [2, 1]\n        ]; // #direction (always knights move)\n        this.history = [];\n        this.dhistory = [];\n        this.phase = 0; // # half of knights move (choices made in phase 0, minor axis offset in phase 1)\n    }\n\n    _cmp(x, y) {\n        if (x > y) return 1;\n        else if (x < y) return -1;\n        else return 0;\n    }\n\n    unit_vector(p0, p1) {\n        // returns a king-move vector one space (in one of 8 directions) from p0 to p1'\n        let [x0, y0] = p0;\n        let [x1, y1] = p1;\n        let ux = this._cmp(x1 - x0, 0);\n        let uy = this._cmp(y1 - y0, 0);\n        if (Math.abs(x1 - x0) > 2 * Math.abs(y1 - y0)) {\n            return [ux, 0];\n        }\n        if (Math.abs(y1 - y0) > 2 * Math.abs(x1 - x0)) {\n            return [0, uy];\n        }\n        return [ux, uy];\n    }\n\n    clear_line(p0, p1) {\n        // slope = (y2 - y1) / (x2 - x1)\n        let m = (p1[1] - p0[1]) / (p1[0] - p0[0]);\n        // intercept = y - m * x\n        let b = p0[1] - m * p0[0];\n        if (p0[0] === p1[0]) {\n            let [y1, y2] = p0[1] < p1[1] ? [p0[1], p1[1]] : [p1[1], p0[1]];\n            for (let y = y1; y <= y2; y++) {\n                Grid.dirty_region(p0[0] - 1, y, 1);\n                Grid.dirty_region(p0[0] + 1, y, 1);\n            }\n        } else {\n            let [x1, x2] = p0[0] < p1[0] ? [p0[0], p1[0]] : [p1[0], p0[0]];\n            for (let i = x1 - 1; i <= x2 + 1; i++) {\n                let y = Math.round(m * i + b);\n                Grid.dirty_region(i, y, 1);\n                Grid.dirty_region(i, y + 2, 1);\n                Grid.dirty_region(i, y - 2, 1);\n            }\n\n            let [y1, y2] = p0[1] < p1[1] ? [p0[1], p1[1]] : [p1[1], p0[1]];\n            for (let i = y1 - 1; i <= y2 + 1; i++) {\n                let x = Math.round((i - b) / m);\n                Grid.dirty_region(x, i, 1);\n                Grid.dirty_region(x + 2, i, 1);\n                Grid.dirty_region(x - 2, i, 1);\n            }\n        }\n    }\n\n    pscan(p0, p1) {\n        // 'search for line crossing from odd points p0 to p1; return first crossing point and direction'\n        let g = Grid;\n        let [x, y] = p0;\n        let [x0, y0] = p0;\n        let [x1, y1] = p1;\n        let ux = this._cmp(x1, x0);\n        let uy = this._cmp(y1, y0);\n        let adx = Math.abs(x1 - x0) + 1;\n        let ady = Math.abs(y1 - y0) + 1;\n        while (x !== x1 || y !== y1) {\n            if (Math.abs((x1 - x) * ady) > Math.abs((y1 - y) * adx)) {\n                if (!g.cell_empty((x + ux), y)) {\n                    return [\n                        [x + ux, y],\n                        [ux, 0]\n                    ];\n                } else {\n                    x += 2 * ux;\n                }\n            } else {\n                if (!g.cell_empty(x, (y + uy))) {\n                    return [\n                        [x, y + uy],\n                        [0, uy]\n                    ];\n                } else {\n                    y += 2 * uy;\n                }\n            }\n        }\n        return null;\n    }\n\n    trace_race(p0, d0, p1, d1) {\n        // '''Trace from p0 and p1 clockwise (d0 and d1 respectively) and see who finds the other.\n        // Return directions from p0 and p1 towards each other.'''\n        let g = Grid;\n        let [x0, y0] = p0;\n        let [x1, y1] = p1;\n        let [dx0, dy0] = d0;\n        let [dx1, dy1] = d1;\n        while (true) {\n            if (!g.cell_wall(x0 + dx0, y0 + dy0)) {\n                if (g.cell_wall(x0 + dy0, y0 + dx0)) {\n                    [dx0, dy0] = [dy0, dx0];\n                } else if (g.cell_wall(x0 - dy0, y0 - dx0)) {\n                    [dx0, dy0] = [-dy0, -dx0];\n                } else {\n                    throw new Error('trace_race failed 1');\n                }\n            }\n            x0 += dx0;\n            y0 += dy0;\n            if (x0 === p1[0] && y0 === p1[1]) {\n                return [d0, [-d1[0], -d1[1]]];\n            }\n            if (!g.cell_wall(x1 + dx1, y1 + dy1)) {\n                if (g.cell_wall(x1 + dy1, y1 + dx1)) {\n                    [dx1, dy1] = [dy1, dx1];\n                } else if (g.cell_wall(x1 - dy1, y1 - dx1)) {\n                    [dx1, dy1] = [-dy1, -dx1];\n                } else {\n                    throw new Error('trace_race failed 2');\n                }\n            }\n            x1 += dx1;\n            y1 += dy1;\n            if (x1 === p0[0] && y1 === p0[1]) {\n                return [\n                    [-d0[0], -d0[1]], d1\n                ];\n            }\n        }\n    }\n\n    // Estrategia aleatoria\n    strategy_random(i) {\n        if (Math.random() > 0.5) {\n            this.d[i] = this.dir_clockwise.get(this.d[i]);\n        } else {\n            this.d[i] = this.dir_cclockwise.get(this.d[i]);\n        }\n    }\n\n    // Actualizamos la posicion del Qix\n    update() {\n        let g = Grid;\n        // Aquí habrá que devolver el control si el Player acaba de pasar de nivel\n        //    return\n        let pg = [];\n        let dg = [];\n        let xoff = Grid.offset[0],\n            yoff = Grid.offset[1]; // g.offset;\n        let x, y, steps, dx, dy, px, py;\n        for (let i = 0; i < 2; i++) {\n            if (this.phase === 0) {\n                // # phase 0: choose direction, take first two steps and adjust minor axis\n                this.strategy_random(i);\n                // Crear más estrategias elegir una en cada paso del bucle)\n                [x, y] = this.p[i];\n                steps = this.dir_steps.get(this.d[i]);\n                // # step 0\n                [dx, dy] = steps[0];\n                if (g.cell_wall(x + dx, y + dy)) {\n                    if (dx !== 0) {\n                        this.d[i] = this.dir_reflect_x.get(this.d[i]);\n                    } else {\n                        this.d[i] = this.dir_reflect_y.get(this.d[i]);\n                    }\n                } else {\n                    x += 2 * dx;\n                    y += 2 * dy;\n                }\n                // step 1\n                [dx, dy] = steps[1];\n                if (g.cell_wall(x + dx, y + dy)) {\n                    if (dx !== 0) {\n                        this.d[i] = this.dir_reflect_x.get(this.d[i]);\n                    } else {\n                        this.d[i] = this.dir_reflect_y.get(this.d[i]);\n                    }\n                } else {\n                    x += 2 * dx;\n                    y += 2 * dy;\n                }\n                pg.push([xoff + (x - dx) * 3, yoff + (y - dy) * 3]);\n                this.p[i] = [x, y];\n                dg.push([x, y]);\n            } else {\n                // # phase 1: take last step\n                [x, y] = this.p[i];\n                steps = this.dir_steps.get(this.d[i]);\n                // # step 2\n                [dx, dy] = steps[2];\n                if (g.cell_wall(x + dx, y + dy)) {\n                    if (dx !== 0) {\n                        this.d[i] = this.dir_reflect_x.get(this.d[i]);\n                    } else {\n                        this.d[i] = this.dir_reflect_y.get(this.d[i]);\n                    }\n                } else {\n                    x += 2 * dx;\n                    y += 2 * dy;\n                }\n                pg.push([xoff + x * 3, yoff + y * 3]);\n                dg.push([x, y]);\n                this.p[i] = [x, y];\n            }\n        }\n        let hit0 = this.pscan(this.p[0], this.p[1]);\n        let hit1 = this.pscan(this.p[1], this.p[0]);\n        if (hit0) {\n            let [p0, u0] = hit0;\n            if (Grid.get(p0[0], p0[1]) === Player.TRAIL || Grid.get(p0[0] + u0[0], p0[1] + u0[1]) === Player.TRAIL) {\n                game.ended = true;\n            } else {\n                if (hit1) {\n                    let [p1, u1] = hit1;\n                    if (Grid.get(p1[0], p1[1]) === Player.TRAIL || Grid.get(p1[0] + u1[0], p1[1] + u1[1]) === Player.TRAIL) {\n                        game.ended = true;\n                    } else {\n                        let [d0, d1] = this.trace_race(p0, [this.right_turn[\"[\" + u0[0] + \",\" + u0[1] + \"]\"][0], this.right_turn[\"[\" + u0[0] + \",\" + u0[1] + \"]\"][1]],\n                            p1, [this.right_turn[\"[\" + u1[0] + \",\" + u1[1] + \"]\"][0], this.right_turn[\"[\" + u1[0] + \",\" + u1[1] + \"]\"][1]]);\n                        this.d[0] = this.dir_approach.get([this.d[0], d0]);\n                        this.d[1] = this.dir_approach.get([this.d[1], d1]);\n                    }\n                }\n            }\n        }\n        this.dhistory.push(dg);\n        this.dhistory = this.dhistory.slice(-8);\n        this.history.push(pg);\n        this.history = this.history.slice(-8);\n        this.phase ^= 1;\n    }\n\n    // Dibuja el Qix\n    draw() {\n        for (let h = this.history, dh = this.dhistory, i = 0; i < h.length; i++) {\n            Grid.drawLine(h[i][0], h[i][1]);\n            Qix.clear_line(dh[i][0], dh[i][1]);\n        }\n    }\n\n}","import Game from \"./game/game\";\n\nconst game = new Game();","import Enemy from './enemy';\nimport Grid from './grid';\nimport Info from './info';\nimport Player from './player';\nimport Qix from './qix';\nimport Resources from \"./resources\";\nimport {\n    State\n} from './state';\n\nexport default class Game {\n\n    constructor() {\n        this.info = new Info();\n        this.grid = new Grid();\n        this.qix = new Qix();\n        this.player = State.player = new Player(this.grid);\n        this.loadAssets();\n    }\n\n    loadAssets() {\n        State.soundtrack = new Howl({\n            src: ['/sounds/soundtrack.m4a'],\n            volume: 0.25,\n        });\n        State.gameWon = new Howl({\n            src: ['/sounds/victory.mp3'],\n            volume: 0.25,\n        });\n        State.gameLost = new Howl({\n            src: ['/sounds/fail.mp3'],\n            volume: 0.25,\n        });\n        Resources.onReady(() => {\n            this.start();\n        });\n        Resources.load([\n            '/img/sprites.png',\n        ]);\n    }\n\n    measureFPS() {\n        let now = Date.now();\n        State.frameCount++;\n        State.delta = (now - State.then);\n        if (State.delta > 1000) {\n            State.fps = State.frameCount;\n            info.displayFPS();\n            State.frameCount = 0;\n            State.then = now;\n            State.timer--;\n            if (State.timer <= 0) {\n                this.grid.enemies.push(new Enemy(this.grid, [Math.round(this.grid.w / 2), 2], [1, 0]));\n                this.grid.enemies.push(new Enemy(this.grid, [Math.round(this.grid.w / 2), 2], [-1, 0]));\n                State.timer = 30;\n            }\n        }\n    }\n\n    loop() {\n        if (!State.ended) {\n            if (!State.paused) {\n                this.grid.paint();\n                this.player.update();\n                this.player.paint();\n                this.grid.enemies.forEach((enemy) => {\n                    enemy.update();\n                    enemy.paint();\n                });\n                this.qix.update();\n                this.qix.draw();\n                this.measureFPS();\n                this.grid.displayScore();\n                this.grid.displayTimer();\n                requestAnimationFrame(this.loop);\n            }\n        } else {\n            State.soundtrack.pause();\n            if (State.won) {\n                State.gameWon.play();\n                this.grid.ctx.font = \"150px Georgia\";\n                this.grid.ctx.strokeStyle = 'white';\n                this.grid.ctx.lineWidth = 8;\n                this.grid.ctx.strokeText(\"Victory!\", 80, 280);\n                this.grid.ctx.fillStyle = 'green';\n                this.grid.ctx.fillText(\"Victory!\", 80, 280);\n            } else {\n                State.gameLost.play();\n                this.grid.ctx.font = \"150px Georgia\";\n                this.grid.ctx.strokeStyle = 'white';\n                this.grid.ctx.lineWidth = 8;\n                this.grid.ctx.strokeText(\"Game\", 140, 200);\n                this.grid.ctx.strokeText(\"Over\", 175, 350);\n                this.grid.ctx.fillStyle = 'red';\n                this.grid.ctx.fillText(\"Game\", 140, 200);\n                this.grid.ctx.fillText(\"Over\", 175, 350);\n            }\n        }\n    }\n\n    sleep(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    async start() {\n        State.soundtrack.play();\n        this.onKeydown = this.onKeydown.bind(this);\n        this.onKeyup = this.onKeyup.bind(this);\n        document.addEventListener(\"keydown\", this.onKeydown);\n        document.addEventListener(\"keyup\", this.onKeyup);\n        this.grid.ctx.font = \"30px Arial\";\n        this.grid.ctx.clearRect(this.grid.offset[0] + this.grid.width * 1.4, this.grid.offset[1] + this.grid.height * 1.3, this.grid.width / 5, this.grid.height / 3);\n        this.grid.ctx.fillText(\"3\", this.grid.offset[0] + this.grid.width * 1.5, this.grid.offset[1] + this.grid.height * 1.5);\n        await this.sleep(1000);\n        this.grid.ctx.clearRect(this.grid.offset[0] + this.grid.width * 1.4, this.grid.offset[1] + this.grid.height * 1.3, this.grid.width / 5, this.grid.height / 3);\n        this.grid.ctx.fillText(\"2\", this.grid.offset[0] + this.grid.width * 1.5, this.grid.offset[1] + this.grid.height * 1.5);\n        await this.sleep(1000);\n        this.grid.ctx.clearRect(this.grid.offset[0] + this.grid.width * 1.4, this.grid.offset[1] + this.grid.height * 1.3, this.grid.width / 5, this.grid.height / 3);\n        this.grid.ctx.fillText(\"1\", this.grid.offset[0] + this.grid.width * 1.5, this.grid.offset[1] + this.grid.height * 1.5);\n        await this.sleep(1000);\n        this.loop();\n    }\n\n    toggle() {\n        if (this.paused) {\n            this.paused = false;\n            this.loop();\n        } else {\n            this.paused = true;\n        }\n    }\n\n    disableAll() {\n        const keys = this.keys;\n        keys.shift = false;\n        keys.up = false;\n        keys.down = false;\n        keys.right = false;\n        keys.left = false;\n    }\n\n    onKeydown(event) {\n        const keys = State.keys;\n        this.disableAll();\n        keys.shift = event.shiftKey;\n        switch (event.keyCode) {\n            case 37:\n                event.preventDefault();\n                keys.left = true;\n                break;\n            case 38:\n                event.preventDefault();\n                keys.up = true;\n                break;\n            case 39:\n                event.preventDefault();\n                keys.right = true;\n                break;\n            case 40:\n                event.preventDefault();\n                keys.down = true;\n                break;\n            case 112:\n                this.toggle();\n                break;\n            case 80:\n                this.toggle();\n                break;\n            default:\n        }\n    }\n\n    onKeyup(event) {\n        const keys = State.keys;\n        switch (event.keyCode) {\n            case 37:\n                event.preventDefault();\n                keys.left = false;\n                break;\n            case 38:\n                event.preventDefault();\n                keys.up = false;\n                break;\n            case 39:\n                event.preventDefault();\n                keys.right = false;\n                break;\n            case 40:\n                event.preventDefault();\n                keys.down = false;\n                break;\n            default:\n        }\n    }\n\n}"]}