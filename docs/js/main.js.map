{"version":3,"file":"src/js/main.js","sources":["../../src/js/game/geometry/vector2.js","../../src/js/game/canvas.js","../../node_modules/@babel/runtime/helpers/inheritsLoose.js","../../src/js/game/state.js","../../node_modules/@babel/runtime/helpers/createClass.js","../../src/js/game/geometry/segment.js","../../src/js/game/geometry/polygon.js","../../src/js/game/cut.js","../../src/js/game/enemy.js","../../src/js/game/geometry/rect.js","../../src/js/game/ground.js","../../src/js/game/player.js","../../src/js/game/resources.js","../../src/js/game/game.js","../../src/js/main.js"],"sourcesContent":["export default class Vector2 {\n\n\tconstructor(x = 0, y = 0) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tset(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\treturn this;\n\t}\n\n\tsetScalar(scalar) {\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\treturn this;\n\t}\n\n\tsetX(x) {\n\t\tthis.x = x;\n\t\treturn this;\n\t}\n\n\tsetY(y) {\n\t\tthis.y = y;\n\t\treturn this;\n\t}\n\n\tsetComponent(index, value) {\n\t\tswitch (index) {\n\t\t\tcase 0:\n\t\t\t\tthis.x = value;\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tthis.y = value;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('index is out of range: ' + index);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tgetComponent(index) {\n\t\tswitch (index) {\n\t\t\tcase 0:\n\t\t\t\treturn this.x;\n\t\t\tcase 1:\n\t\t\t\treturn this.y;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('index is out of range: ' + index);\n\t\t}\n\n\t}\n\n\tclone() {\n\t\treturn new this.constructor(this.x, this.y);\n\t}\n\n\tcopy(v) {\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\treturn this;\n\t}\n\n\tadd(v, w) {\n\t\tif (w !== undefined) {\n\t\t\tconsole.warn('THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\n\t\t\treturn this.addVectors(v, w);\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\treturn this;\n\t}\n\n\taddScalar(s) {\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\treturn this;\n\t}\n\n\taddVectors(a, b) {\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\treturn this;\n\t}\n\n\taddScaledVector(v, s) {\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\treturn this;\n\t}\n\n\tsub(v, w) {\n\t\tif (w !== undefined) {\n\t\t\tconsole.warn('THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\n\t\t\treturn this.subVectors(v, w);\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\treturn this;\n\t}\n\n\tsubScalar(s) {\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\treturn this;\n\t}\n\n\tsubVectors(a, b) {\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\treturn this;\n\t}\n\n\tmultiply(v) {\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\treturn this;\n\t}\n\n\tmultiplyScalar(scalar) {\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\treturn this;\n\t}\n\n\tdivide(v) {\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\treturn this;\n\t}\n\n\tdivideScalar(scalar) {\n\t\treturn this.multiplyScalar(1 / scalar);\n\t}\n\n\tapplyMatrix3(m) {\n\t\tvar x = this.x,\n\t\t\ty = this.y;\n\t\tvar e = m.elements;\n\t\tthis.x = e[0] * x + e[3] * y + e[6];\n\t\tthis.y = e[1] * x + e[4] * y + e[7];\n\t\treturn this;\n\t}\n\n\tmin(v) {\n\t\tthis.x = Math.min(this.x, v.x);\n\t\tthis.y = Math.min(this.y, v.y);\n\t\treturn this;\n\t}\n\n\tmax(v) {\n\t\tthis.x = Math.max(this.x, v.x);\n\t\tthis.y = Math.max(this.y, v.y);\n\t\treturn this;\n\t}\n\n\tclamp(min, max) {\n\t\t// assumes min < max, componentwise\n\t\tthis.x = Math.max(min.x, Math.min(max.x, this.x));\n\t\tthis.y = Math.max(min.y, Math.min(max.y, this.y));\n\t\treturn this;\n\t}\n\n\tclampScalar(minVal, maxVal) {\n\t\tthis.x = Math.max(minVal, Math.min(maxVal, this.x));\n\t\tthis.y = Math.max(minVal, Math.min(maxVal, this.y));\n\t\treturn this;\n\t}\n\n\tclampLength(min, max) {\n\t\tvar length = this.length();\n\t\treturn this.divideScalar(length || 1).multiplyScalar(Math.max(min, Math.min(max, length)));\n\t}\n\n\tfloor() {\n\t\tthis.x = Math.floor(this.x);\n\t\tthis.y = Math.floor(this.y);\n\t\treturn this;\n\t}\n\n\tceil() {\n\t\tthis.x = Math.ceil(this.x);\n\t\tthis.y = Math.ceil(this.y);\n\t\treturn this;\n\t}\n\n\tround() {\n\t\tthis.x = Math.round(this.x);\n\t\tthis.y = Math.round(this.y);\n\t\treturn this;\n\t}\n\n\troundToZero() {\n\t\tthis.x = (this.x < 0) ? Math.ceil(this.x) : Math.floor(this.x);\n\t\tthis.y = (this.y < 0) ? Math.ceil(this.y) : Math.floor(this.y);\n\t\treturn this;\n\t}\n\n\tnegate() {\n\t\tthis.x = -this.x;\n\t\tthis.y = -this.y;\n\t\treturn this;\n\t}\n\n\tdot(v) {\n\t\treturn this.x * v.x + this.y * v.y;\n\t}\n\n\tcross(v) {\n\t\treturn this.x * v.y - this.y * v.x;\n\t}\n\n\tlengthSq() {\n\t\treturn this.x * this.x + this.y * this.y;\n\t}\n\n\tlength() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t}\n\n\tmanhattanLength() {\n\t\treturn Math.abs(this.x) + Math.abs(this.y);\n\t}\n\n\tnormalize() {\n\t\treturn this.divideScalar(this.length() || 1);\n\t}\n\n\tangle() {\n\t\t// computes the angle in radians with respect to the positive x-axis\n\t\tvar angle = Math.atan2(-this.y, -this.x) + Math.PI;\n\t\treturn angle;\n\t}\n\n\tdistanceTo(v) {\n\t\treturn Math.sqrt(this.distanceToSquared(v));\n\t}\n\n\tdistanceToSquared(v) {\n\t\tvar dx = this.x - v.x,\n\t\t\tdy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\t}\n\n\tmanhattanDistanceTo(v) {\n\t\treturn Math.abs(this.x - v.x) + Math.abs(this.y - v.y);\n\t}\n\n\tsetLength(length) {\n\t\treturn this.normalize().multiplyScalar(length);\n\t}\n\n\tlerp(v, alpha) {\n\t\tthis.x += (v.x - this.x) * alpha;\n\t\tthis.y += (v.y - this.y) * alpha;\n\t\treturn this;\n\t}\n\n\tlerpVectors(v1, v2, alpha) {\n\t\treturn this.subVectors(v2, v1).multiplyScalar(alpha).add(v1);\n\t}\n\n\tequals(v) {\n\t\treturn ((v.x === this.x) && (v.y === this.y));\n\t}\n\n\tfromArray(array, offset) {\n\t\tif (offset === undefined) offset = 0;\n\t\tthis.x = array[offset];\n\t\tthis.y = array[offset + 1];\n\t\treturn this;\n\t}\n\n\ttoArray(array, offset) {\n\t\tif (array === undefined) array = [];\n\t\tif (offset === undefined) offset = 0;\n\t\tarray[offset] = this.x;\n\t\tarray[offset + 1] = this.y;\n\t\treturn array;\n\t}\n\n\tfromBufferAttribute(attribute, index, offset) {\n\t\tif (offset !== undefined) {\n\t\t\tconsole.warn('THREE.Vector2: offset has been removed from .fromBufferAttribute().');\n\t\t}\n\n\t\tthis.x = attribute.getX(index);\n\t\tthis.y = attribute.getY(index);\n\t\treturn this;\n\t}\n\n\trotateAround(center, angle) {\n\t\tvar c = Math.cos(angle),\n\t\t\ts = Math.sin(angle);\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\t\treturn this;\n\t}\n\n\trandom() {\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\treturn this;\n\t}\n\n}\n","import Vector2 from './geometry/vector2';\n\nexport default class Canvas {\n\n\tconstructor(width, height) {\n\t\tconst canvas = this.canvas = document.querySelector('.game .canvas');\n\t\twidth = width || canvas.offsetWidth;\n\t\theight = height || canvas.offsetHeight;\n\t\tconst size = this.size = new Vector2(width, height);\n\t\tcanvas.width = size.x;\n\t\tcanvas.height = size.y;\n\t\tthis.ctx = canvas.getContext('2d');\n\t}\n\n\tupdate() {\n\t\tconst size = this.size;\n\t\tconst ctx = this.ctx;\n\t\tctx.clearRect(0, 0, size.x, size.y);\n\t}\n\n\tdrawPoint(p) {\n\t\tconst ctx = this.ctx;\n\t\tctx.beginPath();\n\t\tctx.arc(p.x, p.y, 4, 0, 2 * Math.PI);\n\t\tctx.lineWidth = 2;\n\t\tctx.strokeStyle = \"red\";\n\t\tctx.stroke();\n\t}\n\n\tdrawSegment(s) {\n\t\tconst ctx = this.ctx;\n\t\tctx.beginPath();\n\t\tctx.moveTo(s.a.x, s.a.y);\n\t\tctx.lineTo(s.b.x, s.b.y);\n\t\tctx.lineWidth = 2;\n\t\tctx.strokeStyle = \"white\";\n\t\tctx.stroke();\n\t}\n\n\tdrawImage(image, x, y, scale, rotation) {\n\t\tconst ctx = this.ctx;\n\t\tctx.setTransform(scale, 0, 0, scale, x, y); // sets scale and origin\n\t\tctx.rotate(rotation);\n\t\tctx.drawImage(image, -image.naturalWidth / 2, -image.naturalWidth / 2);\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t}\n\n\tdrawImageCenter(image, x, y, cx, cy, scale, rotation) {\n\t\tconst ctx = this.ctx;\n\t\tctx.setTransform(scale, 0, 0, scale, x, y); // sets scale and origin\n\t\tctx.rotate(rotation);\n\t\tctx.drawImage(image, -cx, -cy);\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t}\n\n\t/*\n\tresize() {\n\t\tconst canvas = this.canvas;\n\t\tconst rect = this.rect;\n\t\trect.width = canvas.offsetWidth;\n\t\trect.height = canvas.offsetHeight;\n\t\tcanvas.width = rect.width;\n\t\tcanvas.height = rect.height;\n\t}\n\t*/\n\n}\n","function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nmodule.exports = _inheritsLoose;","export const State = {\n\tended: false,\n\twon: false,\n\tpaused: false,\n\tthen: Date.now(),\n\tsoundtrack: null,\n\tgameWon: null,\n\tgameLost: null,\n\ttimer: 30,\n\tframeCount: 0,\n\tkeys: {},\n\tscore: 0,\n\tarea: 0,\n};\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","import Vector2 from \"./vector2\";\n\nexport default class Segment {\n\n\tget ax() {\n\t\treturn this.a.x;\n\t}\n\tset ax(x) {\n\t\tthis.a.x = x;\n\t}\n\tget ay() {\n\t\treturn this.a.y;\n\t}\n\tset ay(y) {\n\t\tthis.a.y = y;\n\t}\n\tget bx() {\n\t\treturn this.b.x;\n\t}\n\tset bx(x) {\n\t\tthis.b.x = x;\n\t}\n\tget by() {\n\t\treturn this.b.y;\n\t}\n\tset by(y) {\n\t\tthis.b.y = y;\n\t}\n\n\tconstructor(ax = 0, ay = 0, bx = 0, by = 0) {\n\t\tthis.a = new Vector2(ax, ay);\n\t\tthis.b = new Vector2(bx, by);\n\t}\n\n\tdraw() {\n\t\tdrawSegment(this);\n\t}\n\n\tupdate() {\n\t\tthis.draw();\n\t}\n\n\tbounce(s) {\n\t\tconst i = this.intersect(s);\n\t\tif (i) {\n\t\t\tconst r = this.reflect(i, s.b);\n\t\t\tconst d = new Vector2(r.x - i.x, r.y - i.y).normalize();\n\t\t\treturn { r, d };\n\t\t}\n\t}\n\n\tintersect(s) {\n\t\tconst i = this.getIntersection(s);\n\t\tif (i && i.intersectA && i.intersectB) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treflect(intersection, rayTip) {\n\t\tconst n = this.normal();\n\t\tconst v = new Vector2(\n\t\t\trayTip.x - intersection.x,\n\t\t\trayTip.y - intersection.y\n\t\t);\n\t\tconst d = n.dot(v);\n\t\tconst dotNormal = new Vector2(d * n.x, d * n.y);\n\t\tconst reflection = new Vector2(\n\t\t\trayTip.x - dotNormal.x * 2,\n\t\t\trayTip.y - dotNormal.y * 2\n\t\t);\n\t\t// console.log(dotNormal, intersection, rayTip);\n\t\treturn reflection;\n\t\t// console.log(direction);\n\t}\n\n\tnormal(p) {\n\t\tconst dx = this.b.x - this.a.x;\n\t\tconst dy = this.b.y - this.a.y;\n\t\t// const n = new Vector2(-dy, dx); // then the normals are (-dy, dx) and (dy, -dx).\n\t\tconst n = new Vector2(dy, -dx);\n\t\treturn n.normalize();\n\t}\n\n\tvector(iX, iY, rayTipX, rayTipY) {\n\t\tconst rayX = rayTipX - iX;\n\t\tconst rayY = rayTipY - iY;\n\t\treturn new Vector2(rayX, rayY);\n\t}\n\n\tgetIntersection(s) {\n\t\t// if the lines intersect, the result contains the x and y of the intersection (treating the lines as infinite) and booleans for whether line segment 1 or line segment 2 contain the point\n\t\tlet denominator,\n\t\t\ta,\n\t\t\tb,\n\t\t\tnumerator1,\n\t\t\tnumerator2,\n\t\t\tresult = new Vector2();\n\t\t/*\n\t\t{\n\t\t\tx: null,\n\t\t\ty: null,\n\t\t\tintersectA: false,\n\t\t\tintersectB: false\n\t\t};\n\t\t*/\n\t\tdenominator =\n\t\t\t(this.b.y - this.a.y) * (s.b.x - s.a.x) -\n\t\t\t(this.b.x - this.a.x) * (s.b.y - s.a.y);\n\t\tif (denominator === 0) {\n\t\t\treturn result;\n\t\t}\n\t\ta = s.a.y - this.a.y;\n\t\tb = s.a.x - this.a.x;\n\t\tnumerator1 = (this.b.x - this.a.x) * a - (this.b.y - this.a.y) * b;\n\t\tnumerator2 = (s.b.x - s.a.x) * a - (s.b.y - s.a.y) * b;\n\t\ta = numerator1 / denominator;\n\t\tb = numerator2 / denominator;\n\t\t// if we cast these lines infinitely in both directions, they intersect here:\n\t\tresult.x = s.a.x + a * (s.b.x - s.a.x);\n\t\tresult.y = s.a.y + a * (s.b.y - s.a.y);\n\t\t/*\n\t\t// it is worth noting that this should be the same as:\n\t\tx = this.a.x + (b * (this.b.x - this.a.x));\n\t\ty = this.a.x + (b * (this.b.y - this.a.y));\n\t\t*/\n\t\t// if line1 is a segment and line2 is infinite, they intersect if:\n\t\tif (a > 0 && a < 1) {\n\t\t\tresult.intersectA = true;\n\t\t}\n\t\t// if line2 is a segment and line1 is infinite, they intersect if:\n\t\tif (b > 0 && b < 1) {\n\t\t\tresult.intersectB = true;\n\t\t}\n\t\t// if line1 and line2 are segments, they intersect if both of the above are true\n\t\treturn result;\n\t}\n\n\thit(actor, tolerance) {\n\t\tconst hit = Segment.calcIsInsideThickLineSegment(actor.segment.b.x, actor.segment.b.y, this.ax, this.ay, this.bx, this.by, tolerance);\n\t\tif (hit) {\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t// The most useful function. Returns bool true, if the mouse point is actually inside the (finite) line, given a line thickness from the theoretical line away. It also assumes that the line end points are circular, not square.\n\tstatic calcIsInsideThickLineSegment(px, py, ax, ay, bx, by, tolerance = 0.1) {\n\t\tconst L2 = ((bx - ax) * (bx - ax) + (by - ay) * (by - ay));\n\t\tif (L2 == 0) return false;\n\t\tconst r = ((px - ax) * (bx - ax) + (py - ay) * (by - ay)) / L2;\n\t\t// Assume line thickness is circular\n\t\tif (r < 0) {\n\t\t\t// Outside a\n\t\t\treturn (Math.sqrt((ax - px) * (ax - px) + (ay - py) * (ay - py)) <= tolerance);\n\t\t} else if ((0 <= r) && (r <= 1)) {\n\t\t\t// On the line segment\n\t\t\tvar s = ((ay - py) * (bx - ax) - (ax - px) * (by - ay)) / L2;\n\t\t\treturn (Math.abs(s) * Math.sqrt(L2) <= tolerance);\n\t\t} else {\n\t\t\t// Outside b\n\t\t\treturn (Math.sqrt((bx - px) * (bx - px) + (by - py) * (by - py)) <= tolerance);\n\t\t}\n\t}\n\n}\n","import { State } from '../state';\nimport Segment from './segment';\n\nexport default class Polygon {\n\n\tconstructor(points) {\n\t\tthis.segments = [];\n\t\tif (points && points.length > 1) {\n\t\t\tpoints.forEach((p, i) => {\n\t\t\t\tif (i < points.length - 2) {\n\t\t\t\t\tthis.segments.push(new Segment(p[0], p[1], points[i + 1][0], points[i + 1][1]));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tgetArea() {\n\t\tconst points = this.getPoints();\n\t\tlet area = 0;\n\t\tfor (let i = 0, l = points.length; i < l; i++) {\n\t\t\tconst addX = points[i].x;\n\t\t\tconst addY = points[i == l - 1 ? 0 : i + 1].y;\n\t\t\tconst subX = points[i == l - 1 ? 0 : i + 1].x;\n\t\t\tconst subY = points[i].y;\n\t\t\tarea += (addX * addY * 0.5);\n\t\t\tarea -= (subX * subY * 0.5);\n\t\t}\n\t\treturn Math.abs(area);\n\t}\n\n\trebuild(points) {\n\t\tconst segments = [];\n\t\tfor (let i = 0; i < points.length - 1; i++) {\n\t\t\tconst p = points[i];\n\t\t\tsegments.push(new Segment(p.x, p.y, points[i + 1].x, points[i + 1].y));\n\t\t}\n\t\tthis.segments = segments;\n\t\tconsole.log('segments', segments);\n\t}\n\n\thit(actor, tolerance) {\n\t\tfor (let i = 0; i < this.segments.length; i++) {\n\t\t\tconst s = this.segments[i].hit(actor, tolerance);\n\t\t\tif (s) {\n\t\t\t\treturn s;\n\t\t\t}\n\t\t}\n\t\t/*\n\t\treturn this.segments.reduce((p, c) => {\n\t\t\treturn p || c.hit(actor, tolerance);\n\t\t}, false);\n\t\t*/\n\t}\n\n\thitSegments(actor, tolerance) {\n\t\tfor (let i = 0; i < this.segments.length - 1; i++) {\n\t\t\tconst s = this.segments[i].hit(actor, tolerance);\n\t\t\tif (s) {\n\t\t\t\treturn s;\n\t\t\t}\n\t\t}\n\t}\n\n\tintersect(actor) {\n\t\treturn this.segments.reduce((p, c) => {\n\t\t\treturn p || c.intersect(actor.segment);\n\t\t}, false);\n\t}\n\n\tinside(actor) {\n\t\tconst points = this.getPoints();\n\t\treturn this.isPointInside(actor.segment.b, points);\n\t}\n\n\tbounce(segment) {\n\t\tfor (let i = 0; i < this.segments.length; i++) {\n\t\t\tconst bounce = this.segments[i].bounce(segment);\n\t\t\tif (bounce) {\n\t\t\t\treturn bounce;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate() {\n\t\tthis.draw();\n\t}\n\n\tdraw() {\n\t\tconst canvas = State.canvas;\n\t\tconst ctx = canvas.ctx;\n\t\tctx.beginPath();\n\t\tctx.lineWidth = \"5\";\n\t\tctx.strokeStyle = \"green\";\n\t\tctx.fillStyle = \"black\";\n\t\tconst t = this.segments.length;\n\t\tfor (let i = 0; i < t; i++) {\n\t\t\tconst s = this.segments[i];\n\t\t\tif (i === 0) {\n\t\t\t\tctx.moveTo(s.a.x, s.a.y);\n\t\t\t} else {\n\t\t\t\tctx.lineTo(s.a.x, s.a.y);\n\t\t\t}\n\t\t\tif (i === t - 1) {\n\t\t\t\tctx.lineTo(s.b.x, s.b.y);\n\t\t\t}\n\t\t}\n\t\tctx.stroke();\n\t\tctx.fill();\n\t}\n\n\tgetPoints(closed) {\n\t\tconst points = [];\n\t\tfor (let i = 0; i < this.segments.length; i++) {\n\t\t\tconst s = this.segments[i];\n\t\t\tpoints.push(s.a);\n\t\t}\n\t\tif (this.segments.length && closed) {\n\t\t\tpoints.push(this.segments[this.segments.length - 1].b);\n\t\t}\n\t\treturn points;\n\t}\n\n\tisPointInside(p, points) {\n\t\tlet inside = false;\n\t\tlet minX = points[0].x,\n\t\t\tmaxX = points[0].x;\n\t\tlet minY = points[0].y,\n\t\t\tmaxY = points[0].y;\n\t\tfor (let n = 1; n < points.length; n++) {\n\t\t\tconst q = points[n];\n\t\t\tminX = Math.min(q.x, minX);\n\t\t\tmaxX = Math.max(q.x, maxX);\n\t\t\tminY = Math.min(q.y, minY);\n\t\t\tmaxY = Math.max(q.y, maxY);\n\t\t}\n\t\tif (p.x < minX || p.x > maxX || p.y < minY || p.y > maxY) {\n\t\t\treturn false;\n\t\t}\n\t\tlet i = 0,\n\t\t\tj = points.length - 1;\n\t\tfor (i, j; i < points.length; j = i++) {\n\t\t\tif ((points[i].y > p.y) != (points[j].y > p.y) && p.x < (points[j].x - points[i].x) * (p.y - points[i].y) / (points[j].y - points[i].y) + points[i].x) {\n\t\t\t\tinside = !inside;\n\t\t\t}\n\t\t}\n\t\treturn inside;\n\t}\n\n}\n","import Polygon from './geometry/polygon';\nimport Segment from './geometry/segment';\nimport Vector2 from './geometry/vector2';\nimport { State } from './state';\n\nexport default class Cut extends Polygon {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.direction = new Vector2();\n\t\tthis.start = new Vector2();\n\t\tthis.end = new Vector2();\n\t}\n\n\tmove(actor) {\n\t\tlet segment;\n\t\tif (!this.segments.length) {\n\t\t\tthis.start.copy(actor.position);\n\t\t\tsegment = new Segment(actor.position.x, actor.position.y, actor.nx, actor.ny);\n\t\t\tthis.segments.push(segment);\n\t\t} else if (Math.abs(this.direction.x) !== Math.abs(actor.direction.x)) { // direction changed\n\t\t\tconst s = this.segments[this.segments.length - 1];\n\t\t\tsegment = new Segment(s.b.x, s.b.y, actor.nx, actor.ny);\n\t\t\tthis.segments.push(segment);\n\t\t} else {\n\t\t\tsegment = this.segments[this.segments.length - 1];\n\t\t\tsegment.b.x = actor.nx;\n\t\t\tsegment.b.y = actor.ny;\n\t\t}\n\t\tthis.end.x = segment.b.x;\n\t\tthis.end.y = segment.b.y;\n\t\tthis.direction.x = actor.direction.x;\n\t\tthis.direction.y = actor.direction.y;\n\t}\n\n\tclose(actor) {\n\t\tthis.segments = [];\n\t}\n\n\treset(actor) {\n\t\tactor.position.copy(this.start);\n\t\tthis.direction.x = 0;\n\t\tthis.direction.y = 0;\n\t\tthis.segments = [];\n\t}\n\n\tdraw() {\n\t\tconst canvas = State.canvas;\n\t\tconst ctx = canvas.ctx;\n\t\tctx.beginPath();\n\t\tconst t = this.segments.length;\n\t\tfor (let i = 0; i < t; i++) {\n\t\t\tconst s = this.segments[i];\n\t\t\tif (i === 0) {\n\t\t\t\tctx.moveTo(s.a.x, s.a.y);\n\t\t\t} else {\n\t\t\t\tctx.lineTo(s.a.x, s.a.y);\n\t\t\t}\n\t\t\tif (i === t - 1) {\n\t\t\t\tctx.lineTo(s.b.x, s.b.y);\n\t\t\t}\n\t\t}\n\t\tctx.lineWidth = \"7\";\n\t\tctx.strokeStyle = \"black\";\n\t\tctx.stroke();\n\t\tctx.lineWidth = \"3\";\n\t\tctx.strokeStyle = \"white\";\n\t\tctx.stroke();\n\t}\n\n}\n","import Segment from './geometry/segment';\nimport Vector2 from './geometry/vector2';\nimport { State } from './state';\n\nexport default class Enemy {\n\n\tget nx() {\n\t\treturn this.position.x + this.direction.x * this.speed;\n\t}\n\n\tget ny() {\n\t\treturn this.position.y + this.direction.y * this.speed;\n\t}\n\n\tconstructor() {\n\t\tconst ground = State.ground;\n\t\tthis.position = new Vector2(ground.x(0.5), ground.y(0.5));\n\t\tthis.direction = new Vector2(0.5 + Math.random() * 0.5 * (Math.random() > 0.5 ? 1 : -1), 0.5 + Math.random() * 0.5 * (Math.random() > 0.5 ? 1 : -1)).normalize();\n\t\tthis.speed = 3 + Math.random() * 2;\n\t\tthis.segment = new Segment();\n\t}\n\n\tupdate() {\n\t\tif (!this.checkCollision()) {\n\t\t\tthis.move();\n\t\t}\n\t\tthis.draw();\n\t}\n\n\tdraw() {\n\t\tconst canvas = State.canvas;\n\t\tconst ctx = canvas.ctx;\n\t\tconst mouth = State.resources.get(State.assets.mouth);\n\t\tctx.drawImage(mouth, this.position.x - mouth.naturalWidth / 2, this.position.y - mouth.naturalHeight / 2);\n\t\t/*\n\t\tctx.beginPath();\n\t\tctx.strokeStyle = \"black\";\n\t\tctx.arc(this.position.x, this.position.y, 5, 0, 2 * Math.PI, true);\n\t\tctx.stroke();\n\t\tctx.fillStyle = \"red\";\n\t\tctx.fill();\n\t\t*/\n\t}\n\n\tcheckCollision() {\n\t\tconst ground = State.ground;\n\t\tconst cut = State.cut;\n\t\tconst nx = this.nx;\n\t\tconst ny = this.ny;\n\t\tconst mouth = State.resources.get(State.assets.mouth);\n\t\tconst segment = this.segment;\n\t\tsegment.a.set(this.position.x, this.position.y);\n\t\tsegment.b.set(\n\t\t\tthis.position.x + this.direction.x * (mouth.naturalHeight / 2 + this.speed),\n\t\t\tthis.position.y + this.direction.y * (mouth.naturalHeight / 2 + this.speed),\n\t\t);\n\t\tif (cut.hit(this, mouth.naturalHeight / 2)) {\n\t\t\tconst player = State.player;\n\t\t\tcut.reset(player);\n\t\t} else {\n\t\t\tconst bounce = ground.bounce(segment);\n\t\t\tif (bounce) {\n\t\t\t\t// this.position.copy(bounce.r);\n\t\t\t\t// this.direction.x *= -1;\n\t\t\t\t// this.direction.y *= -1;\n\t\t\t\tthis.direction.copy(bounce.d);\n\t\t\t}\n\t\t\treturn bounce;\n\t\t}\n\t}\n\n\tmove() {\n\t\tthis.position.x = this.nx;\n\t\tthis.position.y = this.ny;\n\t}\n\n}\n","export default class Rect {\n\n\tconstructor(x, y, width, height) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.set();\n\t}\n\n\tset() {\n\t\tthis.top = this.y;\n\t\tthis.left = this.x;\n\t\tthis.right = this.left + this.width;\n\t\tthis.bottom = this.top + this.height;\n\t\tthis.setCenter();\n\t}\n\n\tstatic contains(rect, left, top) {\n\t\treturn rect.top <= top && top <= rect.bottom && rect.left <= left && left <= rect.right;\n\t}\n\n\tstatic intersectRect(r1, r2) {\n\t\treturn !(r2.left > r1.right ||\n\t\t\tr2.right < r1.left ||\n\t\t\tr2.top > r1.bottom ||\n\t\t\tr2.bottom < r1.top);\n\t}\n\n\tstatic fromNode(node) {\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tconst rect = node.rect_ || (node.rect_ = new Rect());\n\t\tconst rects = node.getClientRects();\n\t\tif (!rects.length) {\n\t\t\t// console.log(rects, node);\n\t\t\treturn rect;\n\t\t}\n\t\tconst boundingRect = node.getBoundingClientRect();\n\t\t// rect.top: boundingRect.top + defaultView.pageYOffset,\n\t\t// rect.left: boundingRect.left + defaultView.pageXOffset,\n\t\trect.x = boundingRect.left;\n\t\trect.y = boundingRect.top;\n\t\trect.top = boundingRect.top;\n\t\trect.left = boundingRect.left;\n\t\trect.width = boundingRect.width;\n\t\trect.height = boundingRect.height;\n\t\trect.right = rect.left + rect.width;\n\t\trect.bottom = rect.top + rect.height;\n\t\trect.setCenter();\n\t\treturn rect;\n\t}\n\n\tsetSize(w, h) {\n\t\tthis.width = w;\n\t\tthis.height = h;\n\t\tthis.right = this.left + this.width;\n\t\tthis.bottom = this.top + this.height;\n\t\tthis.setCenter();\n\t\t// console.log(w, h);\n\t}\n\n\tsetCenter() {\n\t\tconst center = this.center || (this.center = {});\n\t\tcenter.top = this.top + this.height / 2;\n\t\tcenter.left = this.left + this.width / 2;\n\t\tcenter.x = center.left;\n\t\tcenter.y = center.top;\n\t}\n\n\tcontains(left, top) {\n\t\treturn Rect.contains(this, left, top);\n\t}\n\n\tintersect(rect) {\n\t\treturn Rect.intersectRect(this, rect);\n\t}\n\n\tintersection(rect) {\n\t\tconst intersection = this.intersection_ || (this.intersection_ = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tpow: {\n\t\t\t\tx: -1,\n\t\t\t\ty: -1\n\t\t\t},\n\t\t\toffset: function(offset) {\n\t\t\t\toffset = offset || 0;\n\t\t\t\tconst pow = (this.top - this.rect.height / 2 + offset) / -this.height;\n\t\t\t\treturn pow;\n\t\t\t},\n\t\t\tscroll: function(offset) {\n\t\t\t\toffset = offset || 0;\n\t\t\t\tconst pow = (this.top - this.rect.height / 2 + offset) / -this.height;\n\t\t\t\treturn pow;\n\t\t\t}\n\t\t});\n\t\tintersection.left = this.left;\n\t\tintersection.top = this.top;\n\t\tintersection.width = this.width;\n\t\tintersection.height = this.height;\n\t\tintersection.x = this.left + this.width / 2;\n\t\tintersection.y = this.top + this.height / 2;\n\t\tintersection.rect = rect;\n\t\tconst pow = intersection.offset(0);\n\t\tintersection.pow.y = pow;\n\t\treturn intersection;\n\t}\n\n}\n","import Polygon from './geometry/polygon';\nimport Rect from './geometry/rect';\nimport Segment from './geometry/segment';\nimport { State } from './state';\n\nexport default class Ground extends Polygon {\n\n\tconstructor() {\n\t\tsuper();\n\t\tconst canvas = State.canvas;\n\t\tthis.rect = new Rect(50, 50, canvas.size.x - 100, canvas.size.y - 100);\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\tconst rect = this.rect;\n\t\tthis.segments = [\n\t\t\tnew Segment(rect.left, rect.top, rect.right, rect.top), // top\n\t\t\tnew Segment(rect.right, rect.top, rect.right, rect.bottom), // right\n\t\t\tnew Segment(rect.right, rect.bottom, rect.left, rect.bottom), // bottom\n\t\t\tnew Segment(rect.left, rect.bottom, rect.left, rect.top), // left\n\t\t];\n\t\tState.totalArea = this.getArea();\n\t\tconsole.log('State.totalArea', State.totalArea);\n\t}\n\n\tremove(polygon, firstSegment, lastSegment) {\n\t\tif (polygon.segments.length) {\n\t\t\tconsole.log(firstSegment, lastSegment);\n\t\t\tconst i1 = this.segments.indexOf(firstSegment);\n\t\t\tconst i2 = this.segments.indexOf(lastSegment);\n\t\t\t/*\n\t\t\tconst i1 = this.segments.reduce((p, c, i) => {\n\t\t\t\tconst s = polygon.segments[0];\n\t\t\t\tconst m = c.getIntersection(s);\n\t\t\t\tif (m && (m.intersectA)) {\n\t\t\t\t\tconsole.log('i1', i);\n\t\t\t\t\ts.a.x = m.x;\n\t\t\t\t\ts.a.y = m.y;\n\t\t\t\t\treturn i;\n\t\t\t\t} else {\n\t\t\t\t\treturn p;\n\t\t\t\t}\n\t\t\t}, -1);\n\t\t\tconst i2 = this.segments.reduce((p, c, i) => {\n\t\t\t\tconst s = polygon.segments[polygon.segments.length - 1];\n\t\t\t\tconst m = c.getIntersection(s);\n\t\t\t\tif (m && (m.intersectA)) {\n\t\t\t\t\tconsole.log('i2', i);\n\t\t\t\t\ts.b.x = m.x;\n\t\t\t\t\ts.b.y = m.y;\n\t\t\t\t\treturn i;\n\t\t\t\t} else {\n\t\t\t\t\treturn p;\n\t\t\t\t}\n\t\t\t}, -1);\n\t\t\t*/\n\t\t\tif (i1 !== -1 && i2 !== -1) {\n\t\t\t\tconsole.log('close!', i1, i2);\n\t\t\t\tconst cutPoints = polygon.getPoints(true);\n\t\t\t\tconsole.log('cutPoints.length', cutPoints.length, polygon.segments.length);\n\t\t\t\tconst min = Math.min(i1, i2);\n\t\t\t\tconst max = Math.max(i1, i2);\n\t\t\t\tconst points = [];\n\t\t\t\tfor (let i = 0; i <= min; i++) {\n\t\t\t\t\tconst s = this.segments[i];\n\t\t\t\t\tpoints.push(s.a);\n\t\t\t\t}\n\t\t\t\tconst first = cutPoints[0];\n\t\t\t\tconst last = cutPoints[cutPoints.length - 1];\n\t\t\t\tif (last.distanceTo(points[points.length - 1]) < first.distanceTo(points[points.length - 1])) {\n\t\t\t\t\tcutPoints.reverse();\n\t\t\t\t}\n\t\t\t\tpoints.push.apply(points, cutPoints);\n\t\t\t\tfor (let i = max + 1; i < this.segments.length; i++) {\n\t\t\t\t\tconst s = this.segments[i];\n\t\t\t\t\tpoints.push(s.a);\n\t\t\t\t}\n\t\t\t\tpoints.push(points[0]);\n\t\t\t\tthis.rebuild(points);\n\t\t\t}\n\t\t\tState.area = this.getArea();\n\t\t\tState.percent = Math.round((State.totalArea - State.area) / State.totalArea * 100);\n\t\t\tconsole.log('State', State.area, State.percent);\n\t\t\tconst bar = document.querySelector('.progress__bar');\n\t\t\tgsap.set(bar, { width: `${State.percent}%` });\n\t\t}\n\t}\n\n\tdraw() {\n\t\tconst canvas = State.canvas;\n\t\tconst ctx = canvas.ctx;\n\t\tconst packaging = State.resources.get(State.assets.packaging);\n\t\tctx.drawImage(packaging, 0, 0, packaging.naturalWidth, packaging.naturalHeight, this.rect.x, this.rect.y, this.rect.width, this.rect.height);\n\t\tctx.beginPath();\n\t\tctx.lineWidth = \"3\";\n\t\tctx.strokeStyle = \"black\";\n\t\tconst t = this.segments.length;\n\t\tfor (let i = 0; i < t; i++) {\n\t\t\tconst s = this.segments[i];\n\t\t\tif (i === 0) {\n\t\t\t\tctx.moveTo(s.a.x, s.a.y);\n\t\t\t} else {\n\t\t\t\tctx.lineTo(s.a.x, s.a.y);\n\t\t\t}\n\t\t\t/*\n\t\t\tif (i === t - 1) {\n\t\t\t\tctx.lineTo(s.b.x, s.b.y);\n\t\t\t}\n\t\t\t*/\n\t\t}\n\t\tctx.closePath();\n\t\tctx.save();\n\t\tctx.clip();\n\t\tconst designer = State.resources.get(State.assets.designer);\n\t\tctx.drawImage(designer, 0, 0, designer.naturalWidth, designer.naturalHeight, this.rect.x, this.rect.y, this.rect.width, this.rect.height);\n\t\tctx.restore();\n\t\tctx.stroke();\n\t\tctx.strokeRect(this.rect.x, this.rect.y, this.rect.width, this.rect.height);\n\t\t// ctx.fill();\n\t}\n\n\tx(x) {\n\t\treturn this.rect.left + x * this.rect.width;\n\t}\n\n\ty(y) {\n\t\treturn this.rect.top + y * this.rect.height;\n\t}\n\n}\n","import Segment from './geometry/segment';\nimport Vector2 from './geometry/vector2';\nimport { State } from './state';\n\nexport default class Player {\n\n\tget nx() {\n\t\treturn this.position.x + this.direction.x * this.speed;\n\t}\n\n\tget ny() {\n\t\treturn this.position.y + this.direction.y * this.speed;\n\t}\n\n\tconstructor() {\n\t\tconst ground = State.ground;\n\t\tthis.position = new Vector2(ground.x(0.5), ground.y(1));\n\t\tthis.direction = new Vector2(0, 0);\n\t\tthis.speed = 5;\n\t\tthis.segment = new Segment();\n\t\tthis.active = false;\n\t}\n\n\tupdate() {\n\t\tthis.checkDirection();\n\t\tthis.move();\n\t\tthis.draw();\n\t}\n\n\tdraw() {\n\t\t// const ground = State.ground;\n\t\tconst canvas = State.canvas;\n\t\tconst diamond = State.resources.get(State.assets.diamond);\n\t\t/*\n\t\tconst ctx = canvas.ctx;\n\t\tctx.save();\n\t\tctx.translate(this.position.x, this.position.y);\n\t\tif (this.getOrientation() === 1) {\n\t\t\tctx.rotate(Math.PI / 2);\n\t\t}\n\t\tctx.drawImage(diamond, -diamond.naturalWidth / 2 + 100, -diamond.naturalHeight / 2);\n\t\tctx.restore();\n\t\t*/\n\t\tcanvas.drawImage(diamond, this.position.x, this.position.y, 1, this.getOrientation() === 0 ? Math.PI / 2 : 0);\n\t\t/*\n\t\tctx.beginPath();\n\t\tctx.strokeStyle = \"black\";\n\t\tctx.arc(this.position.x, this.position.y, 5, 0, 2 * Math.PI, true);\n\t\tctx.stroke();\n\t\tctx.fillStyle = \"green\";\n\t\tctx.fill();\n\t\t*/\n\t}\n\n\tgetOrientation() {\n\t\tlet o = 0;\n\t\tif (this.currentSegment && (Math.abs(this.currentSegment.a.x - this.currentSegment.b.x) < 1)) {\n\t\t\to = 1;\n\t\t}\n\t\treturn o;\n\t}\n\n\tcheckDirection() {\n\t\tthis.active = State.keys.shift || State.keys.space;\n\t\tconst direction = this.direction;\n\t\tif (State.keys.left) {\n\t\t\tdirection.x = -1;\n\t\t\tdirection.y = 0;\n\t\t} else if (State.keys.right) {\n\t\t\tdirection.x = 1;\n\t\t\tdirection.y = 0;\n\t\t} else if (State.keys.up) {\n\t\t\tdirection.x = 0;\n\t\t\tdirection.y = -1;\n\t\t} else if (State.keys.down) {\n\t\t\tdirection.x = 0;\n\t\t\tdirection.y = 1;\n\t\t} else {\n\t\t\tdirection.x = 0;\n\t\t\tdirection.y = 0;\n\t\t}\n\t}\n\n\tmove() {\n\t\tconst ground = State.ground;\n\t\tconst cut = State.cut;\n\t\tlet nx = this.nx;\n\t\tlet ny = this.ny;\n\t\tconst segment = this.segment;\n\t\tsegment.a.set(this.position.x, this.position.y);\n\t\tsegment.b.set(nx, ny);\n\t\tlet hitted;\n\t\tif (this.active && (this.direction.x || this.direction.y)) {\n\t\t\tif (hitted = ground.hit(this, 2)) {\n\t\t\t\tconsole.log('hitted');\n\t\t\t\tif (hitted instanceof Segment && cut.segments.length) {\n\t\t\t\t\tconst i = hitted.getIntersection(this.segment);\n\t\t\t\t\tif (i && (i.intersectA || i.intersectB)) {\n\t\t\t\t\t\tthis.position.x = i.x;\n\t\t\t\t\t\tthis.position.y = i.y;\n\t\t\t\t\t}\n\t\t\t\t\tconst segment = cut.segments[cut.segments.length - 1];\n\t\t\t\t\tsegment.b.x = this.position.x;\n\t\t\t\t\tsegment.b.y = this.position.y;\n\t\t\t\t\tthis.lastSegment = hitted;\n\t\t\t\t\tthis.currentSegment = hitted;\n\t\t\t\t\tthis.direction.x = 0;\n\t\t\t\t\tthis.direction.y = 0;\n\t\t\t\t\tconsole.log('cut.segments.length', cut.segments.length);\n\t\t\t\t\tground.remove(cut, this.firstSegment, this.lastSegment);\n\t\t\t\t\tcut.segments = [];\n\t\t\t\t}\n\t\t\t} else if (!ground.inside(this)) {\n\t\t\t\tconsole.log('outside');\n\t\t\t\tthis.direction.x = 0;\n\t\t\t\tthis.direction.y = 0;\n\t\t\t} else if (cut.hitSegments(this, 3)) {\n\t\t\t\tcut.reset(this);\n\t\t\t\tthis.direction.x = 0;\n\t\t\t\tthis.direction.y = 0;\n\t\t\t} else {\n\t\t\t\tcut.move(this);\n\t\t\t\tthis.currentSegment = cut.segments[cut.segments.length - 1];\n\t\t\t}\n\t\t} else {\n\t\t\thitted = ground.hit(this, 3);\n\t\t\tif (hitted) {\n\t\t\t\tthis.firstSegment = hitted;\n\t\t\t\tthis.currentSegment = hitted;\n\t\t\t} else {\n\t\t\t\tthis.direction.x = 0;\n\t\t\t\tthis.direction.y = 0;\n\t\t\t}\n\t\t}\n\t\tthis.position.x = this.nx;\n\t\tthis.position.y = this.ny;\n\t}\n\n}\n","const cache = {};\nconst callbacks = [];\n\nexport default class Resources {\n\n\tstatic loadAssets(assets) {\n\t\tthis.load(Object.keys(assets).map(k => assets[k]));\n\t}\n\n\tstatic load(urlOrArr) {\n\t\tif (urlOrArr instanceof Array) {\n\t\t\turlOrArr.forEach((url) => {\n\t\t\t\tResources.loadUrl(url);\n\t\t\t});\n\t\t} else {\n\t\t\tResources.loadUrl(urlOrArr);\n\t\t}\n\t}\n\n\tstatic loadUrl(url) {\n\t\tif (cache[url]) {\n\t\t\treturn cache[url];\n\t\t} else {\n\t\t\tvar image = new Image();\n\t\t\timage.onload = () => {\n\t\t\t\tcache[url] = image;\n\t\t\t\tif (Resources.isReady()) {\n\t\t\t\t\tcallbacks.forEach((callback) => {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\tcache[url] = false;\n\t\t\timage.src = url;\n\t\t}\n\t}\n\n\tstatic get(url) {\n\t\treturn cache[url];\n\t}\n\n\tstatic isReady() {\n\t\tvar ready = true;\n\t\tfor (var k in cache) {\n\t\t\tif (cache.hasOwnProperty(k) && !cache[k]) {\n\t\t\t\tready = false;\n\t\t\t}\n\t\t}\n\t\treturn ready;\n\t}\n\n\tstatic onReady(callback) {\n\t\tcallbacks.push(callback);\n\t}\n}\n","import Canvas from './canvas';\nimport Cut from './cut';\nimport Enemy from './enemy';\nimport Ground from './ground';\nimport Player from './player';\nimport Resources from './resources';\nimport { State } from './state';\n\nexport default class Game {\n\n\tconstructor() {\n\t\tconst canvas = this.canvas = State.canvas = new Canvas(750, 750);\n\t\tconst ground = this.ground = State.ground = new Ground();\n\t\tconst cut = this.cut = State.cut = new Cut();\n\t\tconst enemies = State.enemies = new Array(1).fill(0).map(x => new Enemy());\n\t\tconst player = State.player = new Player();\n\t\tconst assets = State.assets = {\n\t\t\tdesigner: './img/game/designer.jpg',\n\t\t\tpackaging: './img/game/packaging.jpg',\n\t\t\tmouth: './img/game/mouth.png',\n\t\t\tdiamond: './img/game/diamond.png',\n\t\t};\n\t\tconst resources = State.resources = Resources;\n\t\tResources.onReady(() => {\n\t\t\tthis.init();\n\t\t\tthis.start();\n\t\t});\n\t\tResources.loadAssets(assets);\n\t}\n\n\tinit() {\n\t\tthis.loop = this.loop.bind(this);\n\t\tthis.onKeydown = this.onKeydown.bind(this);\n\t\tthis.onKeyup = this.onKeyup.bind(this);\n\t\tdocument.addEventListener(\"keydown\", this.onKeydown);\n\t\tdocument.addEventListener(\"keyup\", this.onKeyup);\n\t}\n\n\tstart() {\n\t\tState.area = 0;\n\t\tthis.loop();\n\t\tthis.addMoreEnemy();\n\t}\n\n\taddMoreEnemy() {\n\t\tif (this.to) {\n\t\t\tclearTimeout(this.to);\n\t\t}\n\t\tconst add = () => {\n\t\t\tif (!State.ended && !State.paused) {\n\t\t\t\tState.enemies.push(new Enemy());\n\t\t\t\tthis.addMoreEnemy();\n\t\t\t}\n\t\t};\n\t\tthis.to = setTimeout(add, 10000);\n\t}\n\n\tloop() {\n\t\tif (!State.ended) {\n\t\t\tif (!State.paused) {\n\t\t\t\tState.canvas.update();\n\t\t\t\tState.ground.update();\n\t\t\t\tState.cut.update();\n\t\t\t\tState.enemies.forEach(x => x.update());\n\t\t\t\tState.player.update();\n\t\t\t\t/*\n\t\t\t\tthis.grid.paint();\n\t\t\t\tthis.player.update();\n\t\t\t\tthis.player.paint();\n\t\t\t\tthis.grid.enemies.forEach((enemy) => {\n\t\t\t\t    enemy.update();\n\t\t\t\t    enemy.paint();\n\t\t\t\t});\n\t\t\t\tthis.qix.update();\n\t\t\t\tthis.qix.draw();\n\t\t\t\tthis.measureFPS();\n\t\t\t\tthis.grid.displayScore();\n\t\t\t\tthis.grid.displayTimer();\n\t\t\t\t*/\n\t\t\t\trequestAnimationFrame(this.loop);\n\t\t\t}\n\t\t} else {\n\t\t\t// State.soundtrack.pause();\n\t\t\tif (State.won) {\n\t\t\t\t/*\n\t\t\t\tState.gameWon.play();\n\t\t\t\tthis.grid.ctx.font = \"150px Georgia\";\n\t\t\t\tthis.grid.ctx.strokeStyle = 'white';\n\t\t\t\tthis.grid.ctx.lineWidth = 8;\n\t\t\t\tthis.grid.ctx.strokeText(\"Victory!\", 80, 280);\n\t\t\t\tthis.grid.ctx.fillStyle = 'green';\n\t\t\t\tthis.grid.ctx.fillText(\"Victory!\", 80, 280);\n\t\t\t\t*/\n\t\t\t} else {\n\t\t\t\t/*\n\t\t\t\tState.gameLost.play();\n\t\t\t\tthis.grid.ctx.font = \"150px Georgia\";\n\t\t\t\tthis.grid.ctx.strokeStyle = 'white';\n\t\t\t\tthis.grid.ctx.lineWidth = 8;\n\t\t\t\tthis.grid.ctx.strokeText(\"Game\", 140, 200);\n\t\t\t\tthis.grid.ctx.strokeText(\"Over\", 175, 350);\n\t\t\t\tthis.grid.ctx.fillStyle = 'red';\n\t\t\t\tthis.grid.ctx.fillText(\"Game\", 140, 200);\n\t\t\t\tthis.grid.ctx.fillText(\"Over\", 175, 350);\n\t\t\t\t*/\n\t\t\t}\n\t\t}\n\t}\n\n\ttoggle() {\n\t\tif (State.paused) {\n\t\t\tState.paused = false;\n\t\t\tthis.loop();\n\t\t\tthis.addMoreEnemy();\n\t\t} else {\n\t\t\tState.paused = true;\n\t\t}\n\t}\n\n\thandleKeyCode(event) {\n\t\tlet keyCode = 'unknown';\n\t\tswitch (event.keyCode) {\n\t\t\tcase 32: // space\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeyCode = 'space';\n\t\t\t\tbreak;\n\t\t\tcase 37: // left\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeyCode = 'left';\n\t\t\t\tbreak;\n\t\t\tcase 38: // up\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeyCode = 'up';\n\t\t\t\tbreak;\n\t\t\tcase 39: // right\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeyCode = 'right';\n\t\t\t\tbreak;\n\t\t\tcase 40: // down\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeyCode = 'down';\n\t\t\t\tbreak;\n\t\t}\n\t\treturn keyCode;\n\t}\n\n\tonKeydown(event) {\n\t\tconst keys = State.keys;\n\t\tevent = event || window.event; // to deal with IE\n\t\tkeys.shift = event.shiftKey;\n\t\tswitch (event.keyCode) {\n\t\t\tcase 112: // f1\n\t\t\tcase 80: // p\n\t\t\t\tthis.toggle();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tkeys[this.handleKeyCode(event)] = event.type == 'keydown';\n\t\t}\n\t}\n\n\tonKeyup(event) {\n\t\tconst keys = State.keys;\n\t\tevent = event || window.event; // to deal with IE\n\t\tkeys.shift = event.shiftKey;\n\t\tkeys[this.handleKeyCode(event)] = event.type == 'keydown';\n\t}\n\n}\n","import Game from \"./game/game\";\n\nconst game = new Game();"],"names":["Vector2","x","y","set","setScalar","scalar","setX","setY","setComponent","index","value","Error","getComponent","clone","constructor","copy","v","add","w","undefined","console","warn","addVectors","addScalar","s","a","b","addScaledVector","sub","subVectors","subScalar","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","m","e","elements","min","Math","max","clamp","clampScalar","minVal","maxVal","clampLength","length","floor","ceil","round","roundToZero","negate","dot","cross","lengthSq","sqrt","manhattanLength","abs","normalize","angle","atan2","PI","distanceTo","distanceToSquared","dx","dy","manhattanDistanceTo","setLength","lerp","alpha","lerpVectors","v1","v2","equals","fromArray","array","offset","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","center","c","cos","sin","random","Canvas","width","height","canvas","document","querySelector","offsetWidth","offsetHeight","size","ctx","getContext","update","clearRect","drawPoint","p","beginPath","arc","lineWidth","strokeStyle","stroke","drawSegment","moveTo","lineTo","drawImage","image","scale","rotation","setTransform","rotate","naturalWidth","drawImageCenter","cx","cy","State","ended","won","paused","then","Date","now","soundtrack","gameWon","gameLost","timer","frameCount","keys","score","area","Segment","ax","ay","bx","by","draw","bounce","i","intersect","r","reflect","d","getIntersection","intersectA","intersectB","intersection","rayTip","n","normal","dotNormal","reflection","vector","iX","iY","rayTipX","rayTipY","rayX","rayY","denominator","numerator1","numerator2","result","hit","actor","tolerance","calcIsInsideThickLineSegment","segment","px","py","L2","Polygon","points","segments","forEach","push","getArea","getPoints","l","addX","addY","subX","subY","rebuild","log","hitSegments","reduce","inside","isPointInside","fillStyle","t","fill","closed","minX","maxX","minY","maxY","q","j","Cut","direction","start","end","move","position","nx","ny","close","reset","Enemy","speed","ground","checkCollision","mouth","resources","get","assets","naturalHeight","cut","player","Rect","top","left","right","bottom","setCenter","contains","rect","intersectRect","r1","r2","fromNode","node","rect_","rects","getClientRects","boundingRect","getBoundingClientRect","setSize","h","intersection_","pow","scroll","Ground","init","totalArea","remove","polygon","firstSegment","lastSegment","i1","indexOf","i2","cutPoints","first","last","reverse","apply","percent","bar","gsap","packaging","closePath","save","clip","designer","restore","strokeRect","Player","active","checkDirection","diamond","getOrientation","o","currentSegment","shift","space","up","down","hitted","cache","callbacks","Resources","loadAssets","load","Object","map","k","urlOrArr","Array","url","loadUrl","Image","onload","isReady","callback","src","ready","hasOwnProperty","onReady","Game","enemies","loop","bind","onKeydown","onKeyup","addEventListener","addMoreEnemy","to","clearTimeout","setTimeout","requestAnimationFrame","toggle","handleKeyCode","event","keyCode","preventDefault","window","shiftKey","type","game"],"mappings":"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"}