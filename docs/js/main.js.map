{"version":3,"file":"src/js/main.js","sources":["../../src/js/game/geometry/vector2.js","../../src/js/game/canvas.js","../../node_modules/@babel/runtime/helpers/inheritsLoose.js","../../src/js/game/state.js","../../node_modules/@babel/runtime/helpers/createClass.js","../../src/js/game/geometry/segment.js","../../src/js/game/geometry/polygon.js","../../src/js/game/cut.js","../../src/js/game/enemy.js","../../src/js/game/geometry/rect.js","../../src/js/game/ground.js","../../src/js/game/player.js","../../src/js/game/resources.js","../../src/js/game/game.js","../../src/js/main.js"],"sourcesContent":["export default class Vector2 {\n\n\tconstructor(x = 0, y = 0) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n\tset(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\treturn this;\n\t}\n\n\tsetScalar(scalar) {\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\treturn this;\n\t}\n\n\tsetX(x) {\n\t\tthis.x = x;\n\t\treturn this;\n\t}\n\n\tsetY(y) {\n\t\tthis.y = y;\n\t\treturn this;\n\t}\n\n\tsetComponent(index, value) {\n\t\tswitch (index) {\n\t\t\tcase 0:\n\t\t\t\tthis.x = value;\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tthis.y = value;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('index is out of range: ' + index);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tgetComponent(index) {\n\t\tswitch (index) {\n\t\t\tcase 0:\n\t\t\t\treturn this.x;\n\t\t\tcase 1:\n\t\t\t\treturn this.y;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('index is out of range: ' + index);\n\t\t}\n\n\t}\n\n\tclone() {\n\t\treturn new this.constructor(this.x, this.y);\n\t}\n\n\tcopy(v) {\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\treturn this;\n\t}\n\n\tadd(v, w) {\n\t\tif (w !== undefined) {\n\t\t\tconsole.warn('THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.');\n\t\t\treturn this.addVectors(v, w);\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\treturn this;\n\t}\n\n\taddScalar(s) {\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\treturn this;\n\t}\n\n\taddVectors(a, b) {\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\treturn this;\n\t}\n\n\taddScaledVector(v, s) {\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\treturn this;\n\t}\n\n\tsub(v, w) {\n\t\tif (w !== undefined) {\n\t\t\tconsole.warn('THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.');\n\t\t\treturn this.subVectors(v, w);\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\treturn this;\n\t}\n\n\tsubScalar(s) {\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\treturn this;\n\t}\n\n\tsubVectors(a, b) {\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\treturn this;\n\t}\n\n\tmultiply(v) {\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\treturn this;\n\t}\n\n\tmultiplyScalar(scalar) {\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\treturn this;\n\t}\n\n\tdivide(v) {\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\treturn this;\n\t}\n\n\tdivideScalar(scalar) {\n\t\treturn this.multiplyScalar(1 / scalar);\n\t}\n\n\tapplyMatrix3(m) {\n\t\tvar x = this.x,\n\t\t\ty = this.y;\n\t\tvar e = m.elements;\n\t\tthis.x = e[0] * x + e[3] * y + e[6];\n\t\tthis.y = e[1] * x + e[4] * y + e[7];\n\t\treturn this;\n\t}\n\n\tmin(v) {\n\t\tthis.x = Math.min(this.x, v.x);\n\t\tthis.y = Math.min(this.y, v.y);\n\t\treturn this;\n\t}\n\n\tmax(v) {\n\t\tthis.x = Math.max(this.x, v.x);\n\t\tthis.y = Math.max(this.y, v.y);\n\t\treturn this;\n\t}\n\n\tclamp(min, max) {\n\t\t// assumes min < max, componentwise\n\t\tthis.x = Math.max(min.x, Math.min(max.x, this.x));\n\t\tthis.y = Math.max(min.y, Math.min(max.y, this.y));\n\t\treturn this;\n\t}\n\n\tclampScalar(minVal, maxVal) {\n\t\tthis.x = Math.max(minVal, Math.min(maxVal, this.x));\n\t\tthis.y = Math.max(minVal, Math.min(maxVal, this.y));\n\t\treturn this;\n\t}\n\n\tclampLength(min, max) {\n\t\tvar length = this.length();\n\t\treturn this.divideScalar(length || 1).multiplyScalar(Math.max(min, Math.min(max, length)));\n\t}\n\n\tfloor() {\n\t\tthis.x = Math.floor(this.x);\n\t\tthis.y = Math.floor(this.y);\n\t\treturn this;\n\t}\n\n\tceil() {\n\t\tthis.x = Math.ceil(this.x);\n\t\tthis.y = Math.ceil(this.y);\n\t\treturn this;\n\t}\n\n\tround() {\n\t\tthis.x = Math.round(this.x);\n\t\tthis.y = Math.round(this.y);\n\t\treturn this;\n\t}\n\n\troundToZero() {\n\t\tthis.x = (this.x < 0) ? Math.ceil(this.x) : Math.floor(this.x);\n\t\tthis.y = (this.y < 0) ? Math.ceil(this.y) : Math.floor(this.y);\n\t\treturn this;\n\t}\n\n\tnegate() {\n\t\tthis.x = -this.x;\n\t\tthis.y = -this.y;\n\t\treturn this;\n\t}\n\n\tdot(v) {\n\t\treturn this.x * v.x + this.y * v.y;\n\t}\n\n\tcross(v) {\n\t\treturn this.x * v.y - this.y * v.x;\n\t}\n\n\tlengthSq() {\n\t\treturn this.x * this.x + this.y * this.y;\n\t}\n\n\tlength() {\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t}\n\n\tmanhattanLength() {\n\t\treturn Math.abs(this.x) + Math.abs(this.y);\n\t}\n\n\tnormalize() {\n\t\treturn this.divideScalar(this.length() || 1);\n\t}\n\n\tangle() {\n\t\t// computes the angle in radians with respect to the positive x-axis\n\t\tvar angle = Math.atan2(-this.y, -this.x) + Math.PI;\n\t\treturn angle;\n\t}\n\n\tdistanceTo(v) {\n\t\treturn Math.sqrt(this.distanceToSquared(v));\n\t}\n\n\tdistanceToSquared(v) {\n\t\tvar dx = this.x - v.x,\n\t\t\tdy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\t}\n\n\tmanhattanDistanceTo(v) {\n\t\treturn Math.abs(this.x - v.x) + Math.abs(this.y - v.y);\n\t}\n\n\tsetLength(length) {\n\t\treturn this.normalize().multiplyScalar(length);\n\t}\n\n\tlerp(v, alpha) {\n\t\tthis.x += (v.x - this.x) * alpha;\n\t\tthis.y += (v.y - this.y) * alpha;\n\t\treturn this;\n\t}\n\n\tlerpVectors(v1, v2, alpha) {\n\t\treturn this.subVectors(v2, v1).multiplyScalar(alpha).add(v1);\n\t}\n\n\tequals(v) {\n\t\treturn ((v.x === this.x) && (v.y === this.y));\n\t}\n\n\tfromArray(array, offset) {\n\t\tif (offset === undefined) offset = 0;\n\t\tthis.x = array[offset];\n\t\tthis.y = array[offset + 1];\n\t\treturn this;\n\t}\n\n\ttoArray(array, offset) {\n\t\tif (array === undefined) array = [];\n\t\tif (offset === undefined) offset = 0;\n\t\tarray[offset] = this.x;\n\t\tarray[offset + 1] = this.y;\n\t\treturn array;\n\t}\n\n\tfromBufferAttribute(attribute, index, offset) {\n\t\tif (offset !== undefined) {\n\t\t\tconsole.warn('THREE.Vector2: offset has been removed from .fromBufferAttribute().');\n\t\t}\n\n\t\tthis.x = attribute.getX(index);\n\t\tthis.y = attribute.getY(index);\n\t\treturn this;\n\t}\n\n\trotateAround(center, angle) {\n\t\tvar c = Math.cos(angle),\n\t\t\ts = Math.sin(angle);\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\t\treturn this;\n\t}\n\n\trandom() {\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\treturn this;\n\t}\n\n}\n","import Vector2 from './geometry/vector2';\n\nexport default class Canvas {\n\n\tconstructor() {\n\t\tconst canvas = this.canvas = document.querySelector('.game .canvas');\n\t\tconst size = this.size = new Vector2(canvas.offsetWidth, canvas.offsetHeight);\n\t\tcanvas.width = size.x;\n\t\tcanvas.height = size.y;\n\t\tthis.ctx = canvas.getContext('2d');\n\t}\n\n\tupdate() {\n\t\tconst size = this.size;\n\t\tconst ctx = this.ctx;\n\t\tctx.clearRect(0, 0, size.x, size.y);\n\t}\n\n\tdrawPoint(p) {\n\t\tconst ctx = this.ctx;\n\t\tctx.beginPath();\n\t\tctx.arc(p.x, p.y, 4, 0, 2 * Math.PI);\n\t\tctx.lineWidth = 2;\n\t\tctx.strokeStyle = \"red\";\n\t\tctx.stroke();\n\t}\n\n\tdrawSegment(s) {\n\t\tconst ctx = this.ctx;\n\t\tctx.beginPath();\n\t\tctx.moveTo(s.a.x, s.a.y);\n\t\tctx.lineTo(s.b.x, s.b.y);\n\t\tctx.lineWidth = 2;\n\t\tctx.strokeStyle = \"white\";\n\t\tctx.stroke();\n\t}\n\n\t/*\n\tresize() {\n\t\tconst canvas = this.canvas;\n\t\tconst rect = this.rect;\n\t\trect.width = canvas.offsetWidth;\n\t\trect.height = canvas.offsetHeight;\n\t\tcanvas.width = rect.width;\n\t\tcanvas.height = rect.height;\n\t}\n\t*/\n\n}\n","function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nmodule.exports = _inheritsLoose;","export const State = {\n\tended: false,\n\twon: false,\n\tpaused: false,\n\tthen: Date.now(),\n\tsoundtrack: null,\n\tgameWon: null,\n\tgameLost: null,\n\ttimer: 30,\n\tframeCount: 0,\n\tkeys: {},\n\tscore: 0,\n\tarea: 0,\n};\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","// import * as geometric from 'geometric';\n\nimport Vector2 from \"./vector2\";\n\nexport default class Segment {\n\n\tget ax() {\n\t\treturn this.a.x;\n\t}\n\tset ax(x) {\n\t\tthis.a.x = x;\n\t}\n\tget ay() {\n\t\treturn this.a.y;\n\t}\n\tset ay(y) {\n\t\tthis.a.y = y;\n\t}\n\tget bx() {\n\t\treturn this.b.x;\n\t}\n\tset bx(x) {\n\t\tthis.b.x = x;\n\t}\n\tget by() {\n\t\treturn this.b.y;\n\t}\n\tset by(y) {\n\t\tthis.b.y = y;\n\t}\n\n\tconstructor(ax = 0, ay = 0, bx = 0, by = 0) {\n\t\tthis.a = new Vector2(ax, ay);\n\t\tthis.b = new Vector2(bx, by);\n\t}\n\n\tdraw() {\n\t\tdrawSegment(this);\n\t}\n\n\tupdate() {\n\t\tthis.draw();\n\t}\n\n\tbounce(s) {\n\t\tconst i = this.intersect(s);\n\t\tif (i) {\n\t\t\tconst r = this.reflect(i, s.b);\n\t\t\tconst d = new Vector2(r.x - i.x, r.y - i.y).normalize();\n\t\t\treturn { r, d };\n\t\t}\n\t}\n\n\tintersect(s) {\n\t\tconst i = this.getIntersection(s);\n\t\tif (i && i.intersectA && i.intersectB) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treflect(intersection, rayTip) {\n\t\tconst n = this.normal();\n\t\tconst v = new Vector2(\n\t\t\trayTip.x - intersection.x,\n\t\t\trayTip.y - intersection.y\n\t\t);\n\t\tconst d = n.dot(v);\n\t\tconst dotNormal = new Vector2(d * n.x, d * n.y);\n\t\tconst reflection = new Vector2(\n\t\t\trayTip.x - dotNormal.x * 2,\n\t\t\trayTip.y - dotNormal.y * 2\n\t\t);\n\t\t// console.log(dotNormal, intersection, rayTip);\n\t\treturn reflection;\n\t\t// console.log(direction);\n\t}\n\n\tnormal(p) {\n\t\tconst dx = this.b.x - this.a.x;\n\t\tconst dy = this.b.y - this.a.y;\n\t\t// const n = new Vector2(-dy, dx); // then the normals are (-dy, dx) and (dy, -dx).\n\t\tconst n = new Vector2(dy, -dx);\n\t\treturn n.normalize();\n\t}\n\n\tvector(iX, iY, rayTipX, rayTipY) {\n\t\tconst rayX = rayTipX - iX;\n\t\tconst rayY = rayTipY - iY;\n\t\treturn new Vector2(rayX, rayY);\n\t}\n\n\tgetIntersection(s) {\n\t\t// if the lines intersect, the result contains the x and y of the intersection (treating the lines as infinite) and booleans for whether line segment 1 or line segment 2 contain the point\n\t\tlet denominator,\n\t\t\ta,\n\t\t\tb,\n\t\t\tnumerator1,\n\t\t\tnumerator2,\n\t\t\tresult = new Vector2();\n\t\t/*\n\t\t{\n\t\t\tx: null,\n\t\t\ty: null,\n\t\t\tintersectA: false,\n\t\t\tintersectB: false\n\t\t};\n\t\t*/\n\t\tdenominator =\n\t\t\t(this.b.y - this.a.y) * (s.b.x - s.a.x) -\n\t\t\t(this.b.x - this.a.x) * (s.b.y - s.a.y);\n\t\tif (denominator === 0) {\n\t\t\treturn result;\n\t\t}\n\t\ta = s.a.y - this.a.y;\n\t\tb = s.a.x - this.a.x;\n\t\tnumerator1 = (this.b.x - this.a.x) * a - (this.b.y - this.a.y) * b;\n\t\tnumerator2 = (s.b.x - s.a.x) * a - (s.b.y - s.a.y) * b;\n\t\ta = numerator1 / denominator;\n\t\tb = numerator2 / denominator;\n\t\t// if we cast these lines infinitely in both directions, they intersect here:\n\t\tresult.x = s.a.x + a * (s.b.x - s.a.x);\n\t\tresult.y = s.a.y + a * (s.b.y - s.a.y);\n\t\t/*\n\t\t// it is worth noting that this should be the same as:\n\t\tx = this.a.x + (b * (this.b.x - this.a.x));\n\t\ty = this.a.x + (b * (this.b.y - this.a.y));\n\t\t*/\n\t\t// if line1 is a segment and line2 is infinite, they intersect if:\n\t\tif (a > 0 && a < 1) {\n\t\t\tresult.intersectA = true;\n\t\t}\n\t\t// if line2 is a segment and line1 is infinite, they intersect if:\n\t\tif (b > 0 && b < 1) {\n\t\t\tresult.intersectB = true;\n\t\t}\n\t\t// if line1 and line2 are segments, they intersect if both of the above are true\n\t\treturn result;\n\t}\n\n\thit(actor, tolerance) {\n\t\t// return geometric.pointOnLine([px, py], [[this.ax, this.ay], [this.bx, this.by]]);\n\t\tconst hit = Segment.calcIsInsideThickLineSegment(actor.segment.b.x, actor.segment.b.y, this.ax, this.ay, this.bx, this.by, tolerance);\n\t\tif (hit) {\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t// The most useful function. Returns bool true, if the mouse point is actually inside the (finite) line, given a line thickness from the theoretical line away. It also assumes that the line end points are circular, not square.\n\tstatic calcIsInsideThickLineSegment(px, py, ax, ay, bx, by, tolerance = 0.1) {\n\t\tconst L2 = ((bx - ax) * (bx - ax) + (by - ay) * (by - ay));\n\t\tif (L2 == 0) return false;\n\t\tconst r = ((px - ax) * (bx - ax) + (py - ay) * (by - ay)) / L2;\n\t\t// Assume line thickness is circular\n\t\tif (r < 0) {\n\t\t\t// Outside a\n\t\t\treturn (Math.sqrt((ax - px) * (ax - px) + (ay - py) * (ay - py)) <= tolerance);\n\t\t} else if ((0 <= r) && (r <= 1)) {\n\t\t\t// On the line segment\n\t\t\tvar s = ((ay - py) * (bx - ax) - (ax - px) * (by - ay)) / L2;\n\t\t\treturn (Math.abs(s) * Math.sqrt(L2) <= tolerance);\n\t\t} else {\n\t\t\t// Outside b\n\t\t\treturn (Math.sqrt((bx - px) * (bx - px) + (by - py) * (by - py)) <= tolerance);\n\t\t}\n\t}\n\n}\n","import { State } from '../state';\nimport Segment from './segment';\n\nexport default class Polygon {\n\n\tconstructor(points) {\n\t\tthis.segments = [];\n\t\tif (points && points.length > 1) {\n\t\t\tpoints.forEach((p, i) => {\n\t\t\t\tif (i < points.length - 2) {\n\t\t\t\t\tthis.segments.push(new Segment(p[0], p[1], points[i + 1][0], points[i + 1][1]));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\trebuild(points) {\n\t\tconst segments = [];\n\t\tfor (let i = 0; i < points.length - 1; i++) {\n\t\t\tconst p = points[i];\n\t\t\tsegments.push(new Segment(p.x, p.y, points[i + 1].x, points[i + 1].y));\n\t\t}\n\t\tthis.segments = segments;\n\t\tconsole.log('segments', segments);\n\t}\n\n\thit(actor, tolerance) {\n\t\tfor (let i = 0; i < this.segments.length; i++) {\n\t\t\tconst s = this.segments[i].hit(actor, tolerance);\n\t\t\tif (s) {\n\t\t\t\treturn s;\n\t\t\t}\n\t\t}\n\t\t/*\n\t\treturn this.segments.reduce((p, c) => {\n\t\t\treturn p || c.hit(actor, tolerance);\n\t\t}, false);\n\t\t*/\n\t}\n\n\thitSegments(actor, tolerance) {\n\t\tfor (let i = 0; i < this.segments.length - 1; i++) {\n\t\t\tconst s = this.segments[i].hit(actor, tolerance);\n\t\t\tif (s) {\n\t\t\t\treturn s;\n\t\t\t}\n\t\t}\n\t}\n\n\tintersect(actor) {\n\t\treturn this.segments.reduce((p, c) => {\n\t\t\treturn p || c.intersect(actor.segment);\n\t\t}, false);\n\t}\n\n\tinside(actor) {\n\t\tconst points = this.getPoints();\n\t\treturn this.isPointInside(actor.segment.b, points);\n\t}\n\n\tbounce(segment) {\n\t\tfor (let i = 0; i < this.segments.length; i++) {\n\t\t\tconst bounce = this.segments[i].bounce(segment);\n\t\t\tif (bounce) {\n\t\t\t\treturn bounce;\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate() {\n\t\tthis.draw();\n\t}\n\n\tdraw() {\n\t\tconst canvas = State.canvas;\n\t\tconst ctx = canvas.ctx;\n\t\tctx.beginPath();\n\t\tctx.lineWidth = \"5\";\n\t\tctx.strokeStyle = \"green\";\n\t\tctx.fillStyle = \"black\";\n\t\tconst t = this.segments.length;\n\t\tfor (let i = 0; i < t; i++) {\n\t\t\tconst s = this.segments[i];\n\t\t\tif (i === 0) {\n\t\t\t\tctx.moveTo(s.a.x, s.a.y);\n\t\t\t} else {\n\t\t\t\tctx.lineTo(s.a.x, s.a.y);\n\t\t\t}\n\t\t\tif (i === t - 1) {\n\t\t\t\tctx.lineTo(s.b.x, s.b.y);\n\t\t\t}\n\t\t}\n\t\tctx.stroke();\n\t\tctx.fill();\n\t}\n\n\tgetPoints(closed) {\n\t\tconst points = [];\n\t\tfor (let i = 0; i < this.segments.length; i++) {\n\t\t\tconst s = this.segments[i];\n\t\t\tpoints.push(s.a);\n\t\t}\n\t\tif (this.segments.length && closed) {\n\t\t\tpoints.push(this.segments[this.segments.length - 1].b);\n\t\t}\n\t\treturn points;\n\t}\n\n\tisPointInside(p, points) {\n\t\tlet inside = false;\n\t\tlet minX = points[0].x,\n\t\t\tmaxX = points[0].x;\n\t\tlet minY = points[0].y,\n\t\t\tmaxY = points[0].y;\n\t\tfor (let n = 1; n < points.length; n++) {\n\t\t\tconst q = points[n];\n\t\t\tminX = Math.min(q.x, minX);\n\t\t\tmaxX = Math.max(q.x, maxX);\n\t\t\tminY = Math.min(q.y, minY);\n\t\t\tmaxY = Math.max(q.y, maxY);\n\t\t}\n\t\tif (p.x < minX || p.x > maxX || p.y < minY || p.y > maxY) {\n\t\t\treturn false;\n\t\t}\n\t\tlet i = 0,\n\t\t\tj = points.length - 1;\n\t\tfor (i, j; i < points.length; j = i++) {\n\t\t\tif ((points[i].y > p.y) != (points[j].y > p.y) && p.x < (points[j].x - points[i].x) * (p.y - points[i].y) / (points[j].y - points[i].y) + points[i].x) {\n\t\t\t\tinside = !inside;\n\t\t\t}\n\t\t}\n\t\treturn inside;\n\t}\n\n}\n","import Polygon from './geometry/polygon';\nimport Segment from './geometry/segment';\nimport Vector2 from './geometry/vector2';\nimport { State } from './state';\n\nexport default class Cut extends Polygon {\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.direction = new Vector2();\n\t\tthis.start = new Vector2();\n\t\tthis.end = new Vector2();\n\t}\n\n\tmove(actor) {\n\t\tlet segment;\n\t\tif (!this.segments.length) {\n\t\t\tthis.start.copy(actor.position);\n\t\t\tsegment = new Segment(actor.position.x, actor.position.y, actor.nx, actor.ny);\n\t\t\tthis.segments.push(segment);\n\t\t} else if (Math.abs(this.direction.x) !== Math.abs(actor.direction.x)) { // direction changed\n\t\t\tconst s = this.segments[this.segments.length - 1];\n\t\t\tsegment = new Segment(s.b.x, s.b.y, actor.nx, actor.ny);\n\t\t\tthis.segments.push(segment);\n\t\t} else {\n\t\t\tsegment = this.segments[this.segments.length - 1];\n\t\t\tsegment.b.x = actor.nx;\n\t\t\tsegment.b.y = actor.ny;\n\t\t}\n\t\tthis.end.x = segment.b.x;\n\t\tthis.end.y = segment.b.y;\n\t\tthis.direction.x = actor.direction.x;\n\t\tthis.direction.y = actor.direction.y;\n\t}\n\n\tclose(actor) {\n\t\tthis.segments = [];\n\t}\n\n\treset(actor) {\n\t\tactor.position.copy(this.start);\n\t\tthis.direction.x = 0;\n\t\tthis.direction.y = 0;\n\t\tthis.segments = [];\n\t}\n\n\tdraw() {\n\t\tconst canvas = State.canvas;\n\t\tconst ctx = canvas.ctx;\n\t\tctx.beginPath();\n\t\tctx.lineWidth = \"5\";\n\t\tctx.strokeStyle = \"white\";\n\t\tconst t = this.segments.length;\n\t\tfor (let i = 0; i < t; i++) {\n\t\t\tconst s = this.segments[i];\n\t\t\tif (i === 0) {\n\t\t\t\tctx.moveTo(s.a.x, s.a.y);\n\t\t\t} else {\n\t\t\t\tctx.lineTo(s.a.x, s.a.y);\n\t\t\t}\n\t\t\tif (i === t - 1) {\n\t\t\t\tctx.lineTo(s.b.x, s.b.y);\n\t\t\t}\n\t\t}\n\t\tctx.stroke();\n\t}\n\n}\n","import Segment from './geometry/segment';\nimport Vector2 from './geometry/vector2';\nimport { State } from './state';\n\nexport default class Enemy {\n\n\tget nx() {\n\t\treturn this.position.x + this.direction.x * this.speed;\n\t}\n\n\tget ny() {\n\t\treturn this.position.y + this.direction.y * this.speed;\n\t}\n\n\tconstructor() {\n\t\tconst ground = State.ground;\n\t\tthis.position = new Vector2(ground.x(0.5), ground.y(0.5));\n\t\tthis.direction = new Vector2(0.5 + Math.random() * 0.5 * (Math.random() > 0.5 ? 1 : -1), 0.5 + Math.random() * 0.5 * (Math.random() > 0.5 ? 1 : -1)).normalize();\n\t\tthis.speed = 3 + Math.random() * 2;\n\t\tthis.segment = new Segment();\n\t}\n\n\tupdate() {\n\t\tif (!this.checkCollision()) {\n\t\t\tthis.move();\n\t\t}\n\t\tthis.draw();\n\t}\n\n\tdraw() {\n\t\tconst canvas = State.canvas;\n\t\tconst ctx = canvas.ctx;\n\t\tconst mouth = State.resources.get(State.assets.mouth);\n\t\tctx.drawImage(mouth, this.position.x - mouth.naturalWidth / 2, this.position.y - mouth.naturalHeight / 2);\n\t\t/*\n\t\tctx.beginPath();\n\t\tctx.strokeStyle = \"black\";\n\t\tctx.arc(this.position.x, this.position.y, 5, 0, 2 * Math.PI, true);\n\t\tctx.stroke();\n\t\tctx.fillStyle = \"red\";\n\t\tctx.fill();\n\t\t*/\n\t}\n\n\tcheckCollision() {\n\t\tconst ground = State.ground;\n\t\tconst cut = State.cut;\n\t\tconst nx = this.nx;\n\t\tconst ny = this.ny;\n\t\tconst mouth = State.resources.get(State.assets.mouth);\n\t\tconst segment = this.segment;\n\t\tsegment.a.set(this.position.x, this.position.y);\n\t\tsegment.b.set(\n\t\t\tthis.position.x + this.direction.x * (mouth.naturalHeight / 2 + this.speed),\n\t\t\tthis.position.y + this.direction.y * (mouth.naturalHeight / 2 + this.speed),\n\t\t);\n\t\tif (cut.hit(this, mouth.naturalHeight / 2)) {\n\t\t\tconst player = State.player;\n\t\t\tcut.reset(player);\n\t\t} else {\n\t\t\tconst bounce = ground.bounce(segment);\n\t\t\tif (bounce) {\n\t\t\t\t// this.position.copy(bounce.r);\n\t\t\t\t// this.direction.x *= -1;\n\t\t\t\t// this.direction.y *= -1;\n\t\t\t\tthis.direction.copy(bounce.d);\n\t\t\t}\n\t\t\treturn bounce;\n\t\t}\n\t}\n\n\tmove() {\n\t\tthis.position.x = this.nx;\n\t\tthis.position.y = this.ny;\n\t}\n\n}\n","export default class Rect {\n\n\tconstructor(x, y, width, height) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.set();\n\t}\n\n\tset() {\n\t\tthis.top = this.y;\n\t\tthis.left = this.x;\n\t\tthis.right = this.left + this.width;\n\t\tthis.bottom = this.top + this.height;\n\t\tthis.setCenter();\n\t}\n\n\tstatic contains(rect, left, top) {\n\t\treturn rect.top <= top && top <= rect.bottom && rect.left <= left && left <= rect.right;\n\t}\n\n\tstatic intersectRect(r1, r2) {\n\t\treturn !(r2.left > r1.right ||\n\t\t\tr2.right < r1.left ||\n\t\t\tr2.top > r1.bottom ||\n\t\t\tr2.bottom < r1.top);\n\t}\n\n\tstatic fromNode(node) {\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tconst rect = node.rect_ || (node.rect_ = new Rect());\n\t\tconst rects = node.getClientRects();\n\t\tif (!rects.length) {\n\t\t\t// console.log(rects, node);\n\t\t\treturn rect;\n\t\t}\n\t\tconst boundingRect = node.getBoundingClientRect();\n\t\t// rect.top: boundingRect.top + defaultView.pageYOffset,\n\t\t// rect.left: boundingRect.left + defaultView.pageXOffset,\n\t\trect.x = boundingRect.left;\n\t\trect.y = boundingRect.top;\n\t\trect.top = boundingRect.top;\n\t\trect.left = boundingRect.left;\n\t\trect.width = boundingRect.width;\n\t\trect.height = boundingRect.height;\n\t\trect.right = rect.left + rect.width;\n\t\trect.bottom = rect.top + rect.height;\n\t\trect.setCenter();\n\t\treturn rect;\n\t}\n\n\tsetSize(w, h) {\n\t\tthis.width = w;\n\t\tthis.height = h;\n\t\tthis.right = this.left + this.width;\n\t\tthis.bottom = this.top + this.height;\n\t\tthis.setCenter();\n\t\t// console.log(w, h);\n\t}\n\n\tsetCenter() {\n\t\tconst center = this.center || (this.center = {});\n\t\tcenter.top = this.top + this.height / 2;\n\t\tcenter.left = this.left + this.width / 2;\n\t\tcenter.x = center.left;\n\t\tcenter.y = center.top;\n\t}\n\n\tcontains(left, top) {\n\t\treturn Rect.contains(this, left, top);\n\t}\n\n\tintersect(rect) {\n\t\treturn Rect.intersectRect(this, rect);\n\t}\n\n\tintersection(rect) {\n\t\tconst intersection = this.intersection_ || (this.intersection_ = {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tpow: {\n\t\t\t\tx: -1,\n\t\t\t\ty: -1\n\t\t\t},\n\t\t\toffset: function(offset) {\n\t\t\t\toffset = offset || 0;\n\t\t\t\tconst pow = (this.top - this.rect.height / 2 + offset) / -this.height;\n\t\t\t\treturn pow;\n\t\t\t},\n\t\t\tscroll: function(offset) {\n\t\t\t\toffset = offset || 0;\n\t\t\t\tconst pow = (this.top - this.rect.height / 2 + offset) / -this.height;\n\t\t\t\treturn pow;\n\t\t\t}\n\t\t});\n\t\tintersection.left = this.left;\n\t\tintersection.top = this.top;\n\t\tintersection.width = this.width;\n\t\tintersection.height = this.height;\n\t\tintersection.x = this.left + this.width / 2;\n\t\tintersection.y = this.top + this.height / 2;\n\t\tintersection.rect = rect;\n\t\tconst pow = intersection.offset(0);\n\t\tintersection.pow.y = pow;\n\t\treturn intersection;\n\t}\n\n}\n","import Polygon from './geometry/polygon';\nimport Rect from './geometry/rect';\nimport Segment from './geometry/segment';\nimport { State } from './state';\n\nexport default class Ground extends Polygon {\n\n\tconstructor() {\n\t\tsuper();\n\t\tconst canvas = State.canvas;\n\t\tthis.rect = new Rect(20, 20, canvas.size.x - 40, canvas.size.y - 40);\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\tconst rect = this.rect;\n\t\tthis.segments = [\n\t\t\tnew Segment(rect.left, rect.top, rect.right, rect.top), // top\n\t\t\tnew Segment(rect.right, rect.top, rect.right, rect.bottom), // right\n\t\t\tnew Segment(rect.right, rect.bottom, rect.left, rect.bottom), // bottom\n\t\t\tnew Segment(rect.left, rect.bottom, rect.left, rect.top), // left\n\t\t];\n\t}\n\n\tremove(polygon, firstSegment, lastSegment) {\n\t\tif (polygon.segments.length) {\n\t\t\tconsole.log(firstSegment, lastSegment);\n\t\t\tconst i1 = this.segments.indexOf(firstSegment);\n\t\t\tconst i2 = this.segments.indexOf(lastSegment);\n\t\t\t/*\n\t\t\tconst i1 = this.segments.reduce((p, c, i) => {\n\t\t\t\tconst s = polygon.segments[0];\n\t\t\t\tconst m = c.getIntersection(s);\n\t\t\t\tif (m && (m.intersectA)) {\n\t\t\t\t\tconsole.log('i1', i);\n\t\t\t\t\ts.a.x = m.x;\n\t\t\t\t\ts.a.y = m.y;\n\t\t\t\t\treturn i;\n\t\t\t\t} else {\n\t\t\t\t\treturn p;\n\t\t\t\t}\n\t\t\t}, -1);\n\t\t\tconst i2 = this.segments.reduce((p, c, i) => {\n\t\t\t\tconst s = polygon.segments[polygon.segments.length - 1];\n\t\t\t\tconst m = c.getIntersection(s);\n\t\t\t\tif (m && (m.intersectA)) {\n\t\t\t\t\tconsole.log('i2', i);\n\t\t\t\t\ts.b.x = m.x;\n\t\t\t\t\ts.b.y = m.y;\n\t\t\t\t\treturn i;\n\t\t\t\t} else {\n\t\t\t\t\treturn p;\n\t\t\t\t}\n\t\t\t}, -1);\n\t\t\t*/\n\t\t\tif (i1 !== -1 && i2 !== -1) {\n\t\t\t\tconsole.log('close!', i1, i2);\n\t\t\t\tconst cutPoints = polygon.getPoints(true);\n\t\t\t\tconsole.log('cutPoints.length', cutPoints.length, polygon.segments.length);\n\t\t\t\tconst min = Math.min(i1, i2);\n\t\t\t\tconst max = Math.max(i1, i2);\n\t\t\t\tconst points = [];\n\t\t\t\tfor (let i = 0; i <= min; i++) {\n\t\t\t\t\tconst s = this.segments[i];\n\t\t\t\t\tpoints.push(s.a);\n\t\t\t\t}\n\t\t\t\tconst first = cutPoints[0];\n\t\t\t\tconst last = cutPoints[cutPoints.length - 1];\n\t\t\t\tif (last.distanceTo(points[points.length - 1]) < first.distanceTo(points[points.length - 1])) {\n\t\t\t\t\tcutPoints.reverse();\n\t\t\t\t}\n\t\t\t\tpoints.push.apply(points, cutPoints);\n\t\t\t\tfor (let i = max + 1; i < this.segments.length; i++) {\n\t\t\t\t\tconst s = this.segments[i];\n\t\t\t\t\tpoints.push(s.a);\n\t\t\t\t}\n\t\t\t\tpoints.push(points[0]);\n\t\t\t\tthis.rebuild(points);\n\t\t\t}\n\t\t}\n\t}\n\n\tdraw() {\n\t\tconst canvas = State.canvas;\n\t\tconst ctx = canvas.ctx;\n\t\tconst packaging = State.resources.get(State.assets.packaging);\n\t\tctx.drawImage(packaging, 0, 0, packaging.naturalWidth, packaging.naturalHeight, this.rect.x, this.rect.y, this.rect.width, this.rect.height);\n\t\tctx.beginPath();\n\t\tctx.lineWidth = \"3\";\n\t\tctx.strokeStyle = \"black\";\n\t\tconst t = this.segments.length;\n\t\tfor (let i = 0; i < t; i++) {\n\t\t\tconst s = this.segments[i];\n\t\t\tif (i === 0) {\n\t\t\t\tctx.moveTo(s.a.x, s.a.y);\n\t\t\t} else {\n\t\t\t\tctx.lineTo(s.a.x, s.a.y);\n\t\t\t}\n\t\t\t/*\n\t\t\tif (i === t - 1) {\n\t\t\t\tctx.lineTo(s.b.x, s.b.y);\n\t\t\t}\n\t\t\t*/\n\t\t}\n\t\tctx.closePath();\n\t\tctx.save();\n\t\tctx.clip();\n\t\tconst designer = State.resources.get(State.assets.designer);\n\t\tctx.drawImage(designer, 0, 0, designer.naturalWidth, designer.naturalHeight, this.rect.x, this.rect.y, this.rect.width, this.rect.height);\n\t\tctx.restore();\n\t\tctx.stroke();\n\t\tctx.strokeRect(this.rect.x, this.rect.y, this.rect.width, this.rect.height);\n\t\t// ctx.fill();\n\t}\n\n\tx(x) {\n\t\treturn this.rect.left + x * this.rect.width;\n\t}\n\n\ty(y) {\n\t\treturn this.rect.top + y * this.rect.height;\n\t}\n\n}\n","import Segment from './geometry/segment';\nimport Vector2 from './geometry/vector2';\nimport { State } from './state';\n\nexport default class Player {\n\n\tget nx() {\n\t\treturn this.position.x + this.direction.x * this.speed;\n\t}\n\n\tget ny() {\n\t\treturn this.position.y + this.direction.y * this.speed;\n\t}\n\n\tconstructor() {\n\t\tconst ground = State.ground;\n\t\tthis.position = new Vector2(ground.x(0.5), ground.y(1));\n\t\tthis.direction = new Vector2(0, 0);\n\t\tthis.speed = 5;\n\t\tthis.segment = new Segment();\n\t\tthis.active = false;\n\t}\n\n\tupdate() {\n\t\tthis.checkDirection();\n\t\tthis.move();\n\t\tthis.draw();\n\t}\n\n\tdraw() {\n\t\tconst ground = State.ground;\n\t\tconst canvas = State.canvas;\n\t\tconst ctx = canvas.ctx;\n\t\tctx.beginPath();\n\t\tctx.strokeStyle = \"black\";\n\t\tctx.arc(this.position.x, this.position.y, 5, 0, 2 * Math.PI, true);\n\t\tctx.stroke();\n\t\tctx.fillStyle = \"green\";\n\t\tctx.fill();\n\t}\n\n\tcheckDirection() {\n\t\tthis.active = State.keys.shift || State.keys.space;\n\t\tconst direction = this.direction;\n\t\tif (State.keys.left) {\n\t\t\tdirection.x = -1;\n\t\t\tdirection.y = 0;\n\t\t} else if (State.keys.right) {\n\t\t\tdirection.x = 1;\n\t\t\tdirection.y = 0;\n\t\t} else if (State.keys.up) {\n\t\t\tdirection.x = 0;\n\t\t\tdirection.y = -1;\n\t\t} else if (State.keys.down) {\n\t\t\tdirection.x = 0;\n\t\t\tdirection.y = 1;\n\t\t} else {\n\t\t\tdirection.x = 0;\n\t\t\tdirection.y = 0;\n\t\t}\n\t}\n\n\tmove() {\n\t\tconst ground = State.ground;\n\t\tconst cut = State.cut;\n\t\tlet nx = this.nx;\n\t\tlet ny = this.ny;\n\t\tconst segment = this.segment;\n\t\tsegment.a.set(this.position.x, this.position.y);\n\t\tsegment.b.set(nx, ny);\n\t\tlet hitted;\n\t\tif (this.active && (this.direction.x || this.direction.y)) {\n\t\t\tif (hitted = ground.hit(this, 2)) {\n\t\t\t\tconsole.log('hitted');\n\t\t\t\tif (hitted instanceof Segment && cut.segments.length) {\n\t\t\t\t\tconst i = hitted.getIntersection(this.segment);\n\t\t\t\t\tif (i && (i.intersectA || i.intersectB)) {\n\t\t\t\t\t\tthis.position.x = i.x;\n\t\t\t\t\t\tthis.position.y = i.y;\n\t\t\t\t\t}\n\t\t\t\t\tconst segment = cut.segments[cut.segments.length - 1];\n\t\t\t\t\tsegment.b.x = this.position.x;\n\t\t\t\t\tsegment.b.y = this.position.y;\n\t\t\t\t\tthis.lastSegment = hitted;\n\t\t\t\t\tthis.direction.x = 0;\n\t\t\t\t\tthis.direction.y = 0;\n\t\t\t\t\tconsole.log('cut.segments.length', cut.segments.length);\n\t\t\t\t\tground.remove(cut, this.firstSegment, this.lastSegment);\n\t\t\t\t\tcut.segments = [];\n\t\t\t\t}\n\t\t\t} else if (!ground.inside(this)) {\n\t\t\t\tconsole.log('outside');\n\t\t\t\tthis.direction.x = 0;\n\t\t\t\tthis.direction.y = 0;\n\t\t\t} else if (cut.hitSegments(this, 3)) {\n\t\t\t\tcut.reset(this);\n\t\t\t\tthis.direction.x = 0;\n\t\t\t\tthis.direction.y = 0;\n\t\t\t} else {\n\t\t\t\tcut.move(this);\n\t\t\t}\n\t\t} else {\n\t\t\thitted = ground.hit(this, 3);\n\t\t\tif (hitted) {\n\t\t\t\tthis.firstSegment = hitted;\n\t\t\t} else {\n\t\t\t\tthis.direction.x = 0;\n\t\t\t\tthis.direction.y = 0;\n\t\t\t}\n\t\t}\n\t\tthis.position.x = this.nx;\n\t\tthis.position.y = this.ny;\n\t}\n\n}\n","const cache = {};\nconst callbacks = [];\n\nexport default class Resources {\n\n\tstatic loadAssets(assets) {\n\t\tthis.load(Object.keys(assets).map(k => assets[k]));\n\t}\n\n\tstatic load(urlOrArr) {\n\t\tif (urlOrArr instanceof Array) {\n\t\t\turlOrArr.forEach((url) => {\n\t\t\t\tResources.loadUrl(url);\n\t\t\t});\n\t\t} else {\n\t\t\tResources.loadUrl(urlOrArr);\n\t\t}\n\t}\n\n\tstatic loadUrl(url) {\n\t\tif (cache[url]) {\n\t\t\treturn cache[url];\n\t\t} else {\n\t\t\tvar image = new Image();\n\t\t\timage.onload = () => {\n\t\t\t\tcache[url] = image;\n\t\t\t\tif (Resources.isReady()) {\n\t\t\t\t\tcallbacks.forEach((callback) => {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\tcache[url] = false;\n\t\t\timage.src = url;\n\t\t}\n\t}\n\n\tstatic get(url) {\n\t\treturn cache[url];\n\t}\n\n\tstatic isReady() {\n\t\tvar ready = true;\n\t\tfor (var k in cache) {\n\t\t\tif (cache.hasOwnProperty(k) && !cache[k]) {\n\t\t\t\tready = false;\n\t\t\t}\n\t\t}\n\t\treturn ready;\n\t}\n\n\tstatic onReady(callback) {\n\t\tcallbacks.push(callback);\n\t}\n}\n","import Canvas from './canvas';\nimport Cut from './cut';\nimport Enemy from './enemy';\nimport Ground from './ground';\nimport Player from './player';\nimport Resources from './resources';\nimport { State } from './state';\n\nexport default class Game {\n\n\tconstructor() {\n\t\tconst canvas = this.canvas = State.canvas = new Canvas();\n\t\tconst ground = this.ground = State.ground = new Ground();\n\t\tconst cut = this.cut = State.cut = new Cut();\n\t\tconst enemies = State.enemies = new Array(3).fill(0).map(x => new Enemy());\n\t\tconst player = State.player = new Player();\n\t\tconst assets = State.assets = {\n\t\t\tdesigner: '/img/game/designer.jpg',\n\t\t\tpackaging: '/img/game/packaging.jpg',\n\t\t\tmouth: '/img/game/mouth.png',\n\t\t\tdiamond: '/img/game/diamond.png',\n\t\t};\n\t\tconst resources = State.resources = Resources;\n\t\tResources.onReady(() => {\n\t\t\tthis.init();\n\t\t});\n\t\tResources.loadAssets(assets);\n\t}\n\n\tinit() {\n\t\tthis.loop = this.loop.bind(this);\n\t\tthis.onKeydown = this.onKeydown.bind(this);\n\t\tthis.onKeyup = this.onKeyup.bind(this);\n\t\tdocument.addEventListener(\"keydown\", this.onKeydown);\n\t\tdocument.addEventListener(\"keyup\", this.onKeyup);\n\t\tthis.loop();\n\t}\n\n\tloop() {\n\t\tif (!State.ended) {\n\t\t\tif (!State.paused) {\n\t\t\t\tState.canvas.update();\n\t\t\t\tState.ground.update();\n\t\t\t\tState.cut.update();\n\t\t\t\tState.enemies.forEach(x => x.update());\n\t\t\t\tState.player.update();\n\t\t\t\t/*\n\t\t\t\tthis.grid.paint();\n\t\t\t\tthis.player.update();\n\t\t\t\tthis.player.paint();\n\t\t\t\tthis.grid.enemies.forEach((enemy) => {\n\t\t\t\t    enemy.update();\n\t\t\t\t    enemy.paint();\n\t\t\t\t});\n\t\t\t\tthis.qix.update();\n\t\t\t\tthis.qix.draw();\n\t\t\t\tthis.measureFPS();\n\t\t\t\tthis.grid.displayScore();\n\t\t\t\tthis.grid.displayTimer();\n\t\t\t\t*/\n\t\t\t\trequestAnimationFrame(this.loop);\n\t\t\t}\n\t\t} else {\n\t\t\t// State.soundtrack.pause();\n\t\t\tif (State.won) {\n\t\t\t\t/*\n\t\t\t\tState.gameWon.play();\n\t\t\t\tthis.grid.ctx.font = \"150px Georgia\";\n\t\t\t\tthis.grid.ctx.strokeStyle = 'white';\n\t\t\t\tthis.grid.ctx.lineWidth = 8;\n\t\t\t\tthis.grid.ctx.strokeText(\"Victory!\", 80, 280);\n\t\t\t\tthis.grid.ctx.fillStyle = 'green';\n\t\t\t\tthis.grid.ctx.fillText(\"Victory!\", 80, 280);\n\t\t\t\t*/\n\t\t\t} else {\n\t\t\t\t/*\n\t\t\t\tState.gameLost.play();\n\t\t\t\tthis.grid.ctx.font = \"150px Georgia\";\n\t\t\t\tthis.grid.ctx.strokeStyle = 'white';\n\t\t\t\tthis.grid.ctx.lineWidth = 8;\n\t\t\t\tthis.grid.ctx.strokeText(\"Game\", 140, 200);\n\t\t\t\tthis.grid.ctx.strokeText(\"Over\", 175, 350);\n\t\t\t\tthis.grid.ctx.fillStyle = 'red';\n\t\t\t\tthis.grid.ctx.fillText(\"Game\", 140, 200);\n\t\t\t\tthis.grid.ctx.fillText(\"Over\", 175, 350);\n\t\t\t\t*/\n\t\t\t}\n\t\t}\n\t}\n\n\ttoggle() {\n\t\tif (State.paused) {\n\t\t\tState.paused = false;\n\t\t\tthis.loop();\n\t\t} else {\n\t\t\tState.paused = true;\n\t\t}\n\t}\n\n\tonKeydown(event) {\n\t\tconst keys = State.keys;\n\t\tObject.keys(keys).forEach(key => {\n\t\t\tkeys[key] = false;\n\t\t});\n\t\tkeys.shift = event.shiftKey;\n\t\tswitch (event.keyCode) {\n\t\t\tcase 32:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeys.space = true;\n\t\t\t\tbreak;\n\t\t\tcase 37:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeys.left = true;\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeys.up = true;\n\t\t\t\tbreak;\n\t\t\tcase 39:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeys.right = true;\n\t\t\t\tbreak;\n\t\t\tcase 40:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeys.down = true;\n\t\t\t\tbreak;\n\t\t\tcase 112:\n\t\t\t\tthis.toggle();\n\t\t\t\tbreak;\n\t\t\tcase 80:\n\t\t\t\tthis.toggle();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\t}\n\n\tonKeyup(event) {\n\t\tconst keys = State.keys;\n\t\tswitch (event.keyCode) {\n\t\t\tcase 32:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeys.space = false;\n\t\t\t\tbreak;\n\t\t\tcase 37:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeys.left = false;\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeys.up = false;\n\t\t\t\tbreak;\n\t\t\tcase 39:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeys.right = false;\n\t\t\t\tbreak;\n\t\t\tcase 40:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tkeys.down = false;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\t}\n\n}\n","import Game from \"./game/game\";\n\nconst game = new Game();"],"names":["Vector2","x","y","set","setScalar","scalar","setX","setY","setComponent","index","value","Error","getComponent","clone","constructor","copy","v","add","w","undefined","console","warn","addVectors","addScalar","s","a","b","addScaledVector","sub","subVectors","subScalar","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","m","e","elements","min","Math","max","clamp","clampScalar","minVal","maxVal","clampLength","length","floor","ceil","round","roundToZero","negate","dot","cross","lengthSq","sqrt","manhattanLength","abs","normalize","angle","atan2","PI","distanceTo","distanceToSquared","dx","dy","manhattanDistanceTo","setLength","lerp","alpha","lerpVectors","v1","v2","equals","fromArray","array","offset","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","center","c","cos","sin","random","Canvas","canvas","document","querySelector","size","offsetWidth","offsetHeight","width","height","ctx","getContext","update","clearRect","drawPoint","p","beginPath","arc","lineWidth","strokeStyle","stroke","drawSegment","moveTo","lineTo","State","ended","won","paused","then","Date","now","soundtrack","gameWon","gameLost","timer","frameCount","keys","score","area","Segment","ax","ay","bx","by","draw","bounce","i","intersect","r","reflect","d","getIntersection","intersectA","intersectB","intersection","rayTip","n","normal","dotNormal","reflection","vector","iX","iY","rayTipX","rayTipY","rayX","rayY","denominator","numerator1","numerator2","result","hit","actor","tolerance","calcIsInsideThickLineSegment","segment","px","py","L2","Polygon","points","segments","forEach","push","rebuild","log","hitSegments","reduce","inside","getPoints","isPointInside","fillStyle","t","fill","closed","minX","maxX","minY","maxY","q","j","Cut","direction","start","end","move","position","nx","ny","close","reset","Enemy","speed","ground","checkCollision","mouth","resources","get","assets","drawImage","naturalWidth","naturalHeight","cut","player","Rect","top","left","right","bottom","setCenter","contains","rect","intersectRect","r1","r2","fromNode","node","rect_","rects","getClientRects","boundingRect","getBoundingClientRect","setSize","h","intersection_","pow","scroll","Ground","init","remove","polygon","firstSegment","lastSegment","i1","indexOf","i2","cutPoints","first","last","reverse","apply","packaging","closePath","save","clip","designer","restore","strokeRect","Player","active","checkDirection","shift","space","up","down","hitted","cache","callbacks","Resources","loadAssets","load","Object","map","k","urlOrArr","Array","url","loadUrl","image","Image","onload","isReady","callback","src","ready","hasOwnProperty","onReady","Game","enemies","diamond","loop","bind","onKeydown","onKeyup","addEventListener","requestAnimationFrame","toggle","event","key","shiftKey","keyCode","preventDefault","game"],"mappings":"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"}